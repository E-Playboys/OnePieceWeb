var OnePiece=angular.module("OnePiece",["ngAnimate","ngResource","ui.router","ui.bootstrap","angular-loading-bar","oc.lazyLoad","nouislider","ngTable","LocalStorageModule","angularHideHeader","validation","validation.rule"]),baseUrl=$("base").attr("href"),appBaseUrl=baseUrl+"app/",hostName=baseUrl;OnePiece.constant("ngAuthSettings",{apiServiceBaseUri:baseUrl,clientId:"OnePiece.Web"}),OnePiece.run(["authService","$window",function(a,b){a.fillAuthData(),b.fbAsyncInit=function(){FB.init({appId:OnePieceData.FacebookAppId,xfbml:!0,version:"v2.5"});var a;FB.Event.subscribe("xfbml.ready",function(b){"video"===b.type&&(a=b.instance)})},function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/en_US/sdk.js",e.parentNode.insertBefore(d,e))}(document,"script","facebook-jssdk")}]),OnePiece.config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","$validationProvider",function(a,b,c,d,e){c.html5Mode(!0),a.state("pages",{url:"",templateUrl:appBaseUrl+"pages/common/views/common.html"}).state("pages.league",{url:"/league/:slug",params:{slug:{squash:!0,value:null}},templateUrl:appBaseUrl+"pages/league/views/league.html",resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load([{name:"vendors",files:["vendors/fileinput/fileinput.js","vendors/bower_components/angular-file-upload/dist/angular-file-upload.min.js"]}])}]}}).state("pages.team",{url:"/team/:slug",params:{slug:{squash:!0,value:null}},templateUrl:appBaseUrl+"pages/team/views/team.html",resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load([{name:"vendors",files:["vendors/fileinput/fileinput.js","vendors/bower_components/angular-file-upload/dist/angular-file-upload.min.js"]}])}]}}).state("pages.player",{url:"/player/:slug",params:{slug:{squash:!0,value:null}},templateUrl:appBaseUrl+"pages/player/views/player.html",resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load([{name:"vendors",files:["vendors/fileinput/fileinput.js","vendors/bower_components/angular-file-upload/dist/angular-file-upload.min.js"]}])}]}}).state("management",{url:"/management",templateUrl:appBaseUrl+"pages/management/common/views/manage.html"}).state("management.posts",{url:"/posts/{filter}/:slug",params:{filter:{squash:!0,value:null},slug:{squash:!0,value:null}},templateUrl:appBaseUrl+"pages/management/posts/views/posts.html",resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load([{name:"vendors",insertBefore:"#app-level",files:["vendors/bower_components/autosize/dist/autosize.min.js"]},{name:"vendors",files:["vendors/bower_components/lightgallery/dist/js/lg-thumbnail.min.js","vendors/bower_components/angular-file-upload/dist/angular-file-upload.min.js","vendors/bower_components/jquery.gifplayer/jquery.gifplayer.min.js","vendors/bower_components/ngInfiniteScroll/build/ng-infinite-scroll.min.js","vendors/bower_components/jquery_scrollIntoView/jquery.scrolling.min.js","vendors/fileinput/fileinput.min.js"]}])}]}}).state("account",{url:"/account/:action",templateUrl:appBaseUrl+"pages/account/views/login.html"}).state("associate",{url:"/associate",templateUrl:appBaseUrl+"pages/account/views/associate.html"}).state("pages.profile",{url:"/profile/:username",templateUrl:appBaseUrl+"pages/account/views/profile.html",resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load([{name:"vendors",files:["vendors/bower_components/lightgallery/dist/js/lg-thumbnail.min.js","vendors/bower_components/angular-file-upload/dist/angular-file-upload.min.js","vendors/fileinput/fileinput.min.js"]}])}]}}).state("pages.profile.about",{url:"/about",templateUrl:appBaseUrl+"pages/account/views/profile/about.html"}).state("pages.profile.connections",{url:"/connections",templateUrl:appBaseUrl+"pages/account/views/profile/connections.html"}).state("pages.profile.photos",{url:"/photos",templateUrl:appBaseUrl+"pages/account/views/profile/photos.html"}).state("pages.profile.posts",{url:"/posts/{filter}",params:{filter:{squash:!0,value:null}},templateUrl:appBaseUrl+"pages/account/views/profile/posts.html",resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load([{name:"vendors",insertBefore:"#app-level",files:["vendors/bower_components/autosize/dist/autosize.min.js"]},{name:"vendors",files:["vendors/bower_components/lightgallery/dist/js/lg-thumbnail.min.js","vendors/bower_components/angular-file-upload/dist/angular-file-upload.min.js","vendors/bower_components/jquery.gifplayer/jquery.gifplayer.min.js","vendors/bower_components/ngInfiniteScroll/build/ng-infinite-scroll.min.js","vendors/bower_components/jquery_scrollIntoView/jquery.scrolling.min.js","vendors/fileinput/fileinput.min.js"]}])}]}}).state("pages.gag",{url:"/gag/:slug",params:{slug:{squash:!0,value:null}},templateUrl:appBaseUrl+"pages/wall/views/gag.html",resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load([{name:"vendors",insertBefore:"#app-level",files:["vendors/bower_components/autosize/dist/autosize.min.js"]},{name:"vendors",files:["vendors/bower_components/mediaelement/build/mediaelement-and-player.min.js","vendors/bower_components/lightgallery/dist/js/lg-thumbnail.min.js","vendors/bower_components/angular-file-upload/dist/angular-file-upload.min.js","vendors/bower_components/jquery.gifplayer/jquery.gifplayer.min.js","vendors/bower_components/ngInfiniteScroll/build/ng-infinite-scroll.min.js","vendors/bower_components/jquery_scrollIntoView/jquery.scrolling.min.js","vendors/bower_components/ng-tags-input/ng-tags-input.min.js","vendors/fileinput/fileinput.min.js"]}],{cache:!1,timeout:5e3})}]}}).state("pages.wall",{url:"/{filter}/:slug",params:{filter:{squash:!0,value:null},slug:{squash:!0,value:null}},templateUrl:appBaseUrl+"pages/wall/views/wall.html",resolve:{loadPlugin:["$ocLazyLoad",function(a){return a.load([{name:"vendors",insertBefore:"#app-level",files:["vendors/bower_components/autosize/dist/autosize.min.js"]},{name:"vendors",files:["vendors/bower_components/mediaelement/build/mediaelement-and-player.min.js","vendors/bower_components/lightgallery/dist/js/lg-thumbnail.min.js","vendors/bower_components/angular-file-upload/dist/angular-file-upload.min.js","vendors/bower_components/jquery.gifplayer/jquery.gifplayer.min.js","vendors/bower_components/ngInfiniteScroll/build/ng-infinite-scroll.min.js","vendors/bower_components/jquery_scrollIntoView/jquery.scrolling.min.js","vendors/bower_components/ng-tags-input/ng-tags-input.min.js","vendors/fileinput/fileinput.min.js"]}],{cache:!1,timeout:5e3})}]}}),d.interceptors.push("authInterceptorService"),e.showSuccessMessage=!1,e.setErrorHTML(function(a){return'<small class="help-block">'+a+"</small>"}),e.setExpression({username:/^(?!\d)(?!.*-.*-)(?!.*-$)(?!-)[a-zA-Z0-9-]{4,30}$/}).setDefaultMsg({required:{error:"Should not empty"},email:{error:"Invalid email"},minlength:{error:"Too short"},username:{error:"Invalid username"}}),angular.extend(e,{validCallback:function(a){$(a).closest(".input-group").addClass("has-success"),$(a).closest(".input-group").removeClass("has-error"),$(a).closest(".input-group").find("small").remove()},invalidCallback:function(a){$(a).closest(".input-group").addClass("has-error"),$(a).closest(".input-group").removeClass("has-success");var b=$(a).closest(".fg-line"),c=b.find("small");$(a).closest(".input-group").find("small").remove(),b.after(c)}})}]),OnePiece.controller("associateCtrl",["$scope","$state","authService","$injector",function(a,b,c,d){var e=d.get("$validation");a.associateForm={userName:c.externalAuthData.userName,provider:c.externalAuthData.provider,externalAccessToken:c.externalAuthData.externalAccessToken,checkValid:e.checkValid,submit:function(d){e.validate(d).success(function(){c.registerExternal(a.associateForm).then(function(a){b.go("pages.wall")},function(a){var b=[];for(var c in a.ModelState)b.push(a.ModelState[c]);swal(a.Message,b.join(" "),"error")})}).error(function(){})},reset:function(a){e.reset(a)}};var f=this;f.registerData={userName:c.externalAuthData.userName,provider:c.externalAuthData.provider,externalAccessToken:c.externalAuthData.externalAccessToken},f.registerExternal=function(){c.registerExternal(f.registerData).then(function(a){b.go("pages.wall")},function(a){var b=[];for(var c in a.ModelState)b.push(a.ModelState[c]);swal(a.Message,b.join(" "),"error")})}}]),OnePiece.controller("loginCtrl",["$scope","$location","$stateParams","$state","authService","ngAuthSettings","$rootScope","$injector",function(a,b,c,d,e,f,g,h){var i=h.get("$validation");a.loginTab=!0,a.gotoTab=function(b){a.loginTab="login"==b,a.registerTab="register"==b,a.forgotTab="forgot"==b},a.registerForm={checkValid:i.checkValid,submit:function(b){i.validate(b).success(function(){a.register()}).error(function(){})},reset:function(a){i.reset(a)}},a.register=function(){e.saveRegistration(a.registerForm).then(function(b){a.loginForm.userName=a.registerForm.userName,a.loginForm.password=a.registerForm.password,a.login(),swal("success","User has been registered successfully.","success")},function(a){var b=[];for(var c in a.data.ModelState)for(var d=0;d<a.data.ModelState[c].length;d++)b.push(a.data.ModelState[c][d]);swal(a.data.Message,b.join(" "),"error")})},a.loginForm={checkValid:i.checkValid,submit:function(b){i.validate(b).success(function(){a.login()}).error(function(){})},reset:function(a){i.reset(a)}},a.login=function(){e.login(a.loginForm).then(function(a){"account"==d.current.name?d.go("pages.wall"):g.$broadcast("hideLoginForm")},function(a){swal("Login failed!",a.error_description,"error")})},a.authExternalProvider=function(b){var c=location.protocol+"//"+location.host+"/authcomplete",d=f.apiServiceBaseUri+"api/Account/ExternalLogin?provider="+b+"&response_type=token&client_id="+f.clientId+"&redirect_uri="+c;window.$windowScope=a;window.open(d,"Authenticate Account","location=0,status=0,width="+$(window).width()+",height="+$(window).height())},a.authCompletedCB=function(b){a.$apply(function(){if("False"==b.haslocalaccount)e.logOut(),console.log(b),e.externalAuthData={provider:b.provider,userName:b.external_user_name,externalAccessToken:b.external_access_token},g.$broadcast("hideLoginForm"),d.go("associate");else{var a={provider:b.provider,externalAccessToken:b.external_access_token};e.obtainAccessToken(a).then(function(a){"account"==d.current.name?d.go("pages.wall"):g.$broadcast("hideLoginForm")},function(a){swal("Err!",a.error_descriptio,"error")})}})}}]),OnePiece.controller("profileCtrl",["authService","ngAuthSettings","FileUploader","localStorageService","$http","$state","$stateParams","$scope",function(a,b,c,d,e,f,g,h){var i=this;i.currentUserInfo={},i.currentAuth=a.authentication||{},i.currentExtAuth=a.externalAuthData||{},i.editInfo=0,i.editContact=0,i.userGenger={name:"Others",value:2},i.genderOptions=[{name:"Male",value:0},{name:"Female",value:1},{name:"Others",value:2}],i.oldPassword="",i.newPassword="",i.newPasswordRetype="",i.IsAnotherProfile=g.username!==a.authentication.userName,i.IsAnotherProfile?a.getUserProfile(g.username).then(function(a){i.currentUserInfo=a.data,i.currentUserInfo.DateOfBirth=null!=i.currentUserInfo.DateOfBirth?moment(i.currentUserInfo.DateOfBirth).format("DD/MM/YYYY"):"",i.currentUserInfo.JoinedDate=moment(i.currentUserInfo.JoinedDate).format("DD/MM/YYYY"),i.currentUserInfo.LastLogin=moment().format("DD/MM/YYYY"),i.userGenger=i.genderOptions[i.currentUserInfo.Gender]}):(i.currentUserInfo=a.authentication.userInfo,i.currentUserInfo.DateOfBirth=null!=i.currentUserInfo.DateOfBirth?moment(i.currentUserInfo.DateOfBirth).format("DD/MM/YYYY"):"",i.currentUserInfo.JoinedDate=moment(i.currentUserInfo.JoinedDate).format("DD/MM/YYYY"),i.currentUserInfo.LastLogin=moment().format("DD/MM/YYYY"),i.userGenger=i.genderOptions[i.currentUserInfo.Gender]),i.uploader=new c({url:hostName+"api/uploadavatar"});var j=d.get("authorizationData");j&&(i.uploader.headers.Authorization="Bearer "+j.token),i.changeAvatar=function(){$("#avaUploader").click(),i.postAvatarProfile=setInterval(function(){i.uploader.queue.length>0&&(i.uploader.uploadAll(),i.uploader.onSuccessItem=function(b,c){i.currentUserInfo.Avatar=c.url,i.uploader.clearQueue(),a.updateProfile(i.currentUserInfo).then(function(b){a.authentication.userInfo.Avatar=b.data.Avatar;var c=d.get("authorizationData");c.userInfo=JSON.stringify(a.authentication.userInfo),d.set("authorizationData",c),clearInterval(i.postAvatarProfile)})},i.uploader.onErrorItem=function(a,b){swal("Err!",b.Message,"error")})},1e3)},i.updateUserInfo=function(){var b=!(""===i.oldPassword||""===i.newPassword||""===i.newPasswordRetype)&&i.newPassword===i.newPasswordRetype;i.currentUserInfo.Gender=i.userGenger.value,i.currentUserInfo.DateOfBirth=moment(i.currentUserInfo.DateOfBirth,"DD/MM/YYYY").format("YYYY/MM/DD"),a.updateProfile(i.currentUserInfo).then(function(b){a.authentication.userInfo=b.data;var c=d.get("authorizationData");c.userInfo=JSON.stringify(a.authentication.userInfo),d.set("authorizationData",c),i.currentUserInfo.DateOfBirth=moment(i.currentUserInfo.DateOfBirth).format("DD/MM/YYYY"),editInfo=0,editContact=0}),b&&a.changePassword(i.oldPassword,i.newPassword,i.newPasswordRetype).then(function(b){200===b.status&&(a.logOut(),f.go("account",{action:"login"}))})}}]),OnePiece.controller("OnePieceCtrl",["$timeout","$state","growlService","authService","$scope",function(a,b,c,d,e){this.OnePieceData=OnePieceData,this.authentication=d.authentication,this.authentication.isAuth&&c.growl("Welcome back "+this.authentication.userInfo.DisplayName+"!","inverse"),this.logOut=function(){d.logOut(),b.go("pages.wall")},/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(angular.element("html").addClass("ismobile"),this.hideHeaderAttr=!0,this.hideOffsetAttr="90",this.isMobile=!0),this.sidebarToggle={left:!1,right:!1},this.layoutType=localStorage.getItem("ma-layout-status"),this.$state=b,this.sidebarStat=function(a){angular.element(a.target).parent().hasClass("active")||(this.sidebarToggle.left=!1)}}]).controller("headerCtrl",["$timeout","$rootScope","messageService","$state","$uibModal",function(a,b,c,d,e){function f(a,b,c,d){g.modalInstance=e.open({animation:a,templateUrl:"loginForm",controller:"loginCtrl",size:b,backdrop:c,keyboard:d,windowClass:"login-form"})}var g=this;g.openSearch=function(){angular.element("#header").addClass("search-toggled")},g.closeSearch=function(){angular.element("#header").removeClass("search-toggled")},g.searchText="",g.search=function(){d.go("pages.wall",{filter:"search",slug:g.searchText})},g.img=c.img,g.user=c.user,g.user=c.text,g.messageResult=c.getMessage(g.img,g.user,g.text),g.clearNotification=function(b){b.preventDefault();var c=angular.element(b.target).closest(".listview"),d=c.find(".lv-item"),e=d.size();angular.element(b.target).parent().fadeOut(),c.find(".list-group").prepend('<i class="grid-loading hide-it"></i>'),c.find(".grid-loading").fadeIn(1500);var f=0;d.each(function(){var b=$(this);a(function(){b.addClass("animated fadeOutRightBig").delay(1e3).queue(function(){b.remove()})},f+=150)}),a(function(){angular.element("#notifications").addClass("empty")},150*e+200)},g.clearLocalStorage=function(){swal({title:"Are you sure?",text:"All your saved localStorage values will be removed",type:"warning",showCancelButton:!0,confirmButtonColor:"#be1101",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(){localStorage.clear(),swal("Done!","localStorage is cleared","success")})},g.fullScreen=function(){function a(a){a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()}function b(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}a(b()?document.documentElement:document.documentElement)},g.showPostingForm=function(){b.$broadcast("showPostingForm")},g.showLoginForm=function(){f(!0,"md",!0,!0)},g.hideLoginForm=function(){g.modalInstance.close()},b.$on("showLoginForm",function(){g.showLoginForm()}),b.$on("hideLoginForm",function(){g.hideLoginForm()})}]),OnePiece.controller("leagueCtrl",["$modal","$scope","League","localStorageService","$http",function(a,b,c,d,e){function f(b,c,f,h,i){g.league=i;a.open({animation:b,templateUrl:"addLeagueForm",controller:["$scope","$modalInstance","FileUploader",function(a,b,c){var f=hostName+"api/uploadavatar",h={name:"imageFilter",fn:function(a,b){var c="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(c)!==-1}};a.newLeague=g.league||{},a.logoUploader=new c({url:f}),a.logoUploader.onBeforeUploadItem=function(a){var b=d.get("authorizationData");b&&(a.headers.Authorization="Bearer "+b.token)},a.logoUploader.filters.push(h),a.logoUploader.onWhenAddingFileFailed=function(a,b,c){swal("Err!","Please use |jpg|png|jpeg|bmp|gif| files.","error")},a.save=function(){a.uploadedLogo=!1,a.logoUploader.queue.length>0?(a.logoUploader.uploadAll(),a.logoUploader.onSuccessItem=function(b,c){a.newLeague.Logo=c.url,a.uploadedLogo=!0,a.sendLeague()},a.logoUploader.onErrorItem=function(a,b){}):a.newLeague.Logo?(a.uploadedLogo=!0,a.sendLeague()):swal("Empty Logo!","Please select Logo.","error")},a.sendLeague=function(){a.uploadedLogo&&e({url:hostName+"api/league/createorupdate",method:"POST",data:a.newLeague}).success(function(c){if(a.newLeague.Id>0){var d=g.League.items.indexOf(a.newLeague);g.League.items[d]=c}else g.League.items.push(c);a.logoUploader.clearQueue(),b.close()}).error(function(a,b){swal("Err!",a.Message,"error")})},a.cancel=function(){b.dismiss("cancel")}}],size:c,backdrop:f,keyboard:h})}var g=this;g.League=new c,g.League.nextPage(),g.listviewSearchStat=!1,g.lvSearch=function(){g.listviewSearchStat=!0},g.open=function(a){f(!0,"lg",!0,!0,a)}}]),OnePiece.controller("playerCtrl",["$modal","$scope","Player","localStorageService","$http",function(a,b,c,d,e){function f(b,c,f,h,i){g.player=i;a.open({animation:b,templateUrl:"addPlayerForm",controller:["$scope","$uibModalInstance","FileUploader",function(a,b,c){var f=hostName+"api/uploadavatar",h={name:"imageFilter",fn:function(a,b){var c="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(c)!==-1}};a.newPlayer=g.player||{},a.avatarUploader=new c({url:f}),a.avatarUploader.onBeforeUploadItem=function(a){var b=d.get("authorizationData");b&&(a.headers.Authorization="Bearer "+b.token)},a.avatarUploader.filters.push(h),a.avatarUploader.onWhenAddingFileFailed=function(a,b,c){swal("Err!","Please use |jpg|png|jpeg|bmp|gif| files.","error")},a.save=function(){a.uploadedAvatar=!1,a.avatarUploader.queue.length>0?(a.uploadedAvatar=!1,a.avatarUploader.uploadAll(),a.avatarUploader.onSuccessItem=function(b,c){a.newPlayer.Avatar=c.url,a.newPlayer.FunnyAvatar=c.url,a.uploadedAvatar=!0,a.sendPlayer()},a.avatarUploader.onErrorItem=function(a,b){}):a.newPlayer.Avatar?(a.uploadedAvatar=!0,a.sendPlayer()):swal("Empty Avatar!","Please select Avatar.","error")},a.sendPlayer=function(){a.uploadedAvatar&&e({url:hostName+"api/player/createorupdate",method:"POST",data:a.newPlayer}).success(function(c){if(a.newPlayer.Id>0){var d=g.Player.items.indexOf(a.newPlayer);g.Player.items[d]=c}else g.Player.items.push(c);a.avatarUploader.clearQueue(),b.close()}).error(function(a,b){swal("Err!",a.Message,"error")})},a.cancel=function(){b.dismiss("cancel")}}],size:c,backdrop:f,keyboard:h})}var g=this;g.Player=new c,g.Player.nextPage(),g.listviewSearchStat=!1,g.lvSearch=function(){g.listviewSearchStat=!0},g.open=function(a){f(!0,"lg",!0,!0,a)}}]),OnePiece.controller("teamCtrl",["$uibModal","$scope","Team","localStorageService","$http",function(a,b,c,d,e){function f(b,c,f,h,i){g.team=i;a.open({animation:b,templateUrl:"addTeamForm",controller:["$scope","$uibModalInstance","FileUploader",function(a,b,c){var f=hostName+"api/uploadavatar",h={name:"imageFilter",fn:function(a,b){var c="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(c)!==-1}};a.newTeam=g.team||{},a.logoUploader=new c({url:f}),a.logoUploader.onBeforeUploadItem=function(a){var b=d.get("authorizationData");b&&(a.headers.Authorization="Bearer "+b.token)},a.logoUploader.filters.push(h),a.logoUploader.onWhenAddingFileFailed=function(a,b,c){swal("Err!","Please use |jpg|png|jpeg|bmp|gif| files.","error")},a.save=function(){a.uploadedLogo=!1,a.logoUploader.queue.length>0?(a.logoUploader.uploadAll(),a.logoUploader.onSuccessItem=function(b,c){a.newTeam.Logo=c.url,a.uploadedLogo=!0,a.sendTeam()},a.logoUploader.onErrorItem=function(a,b){}):a.newTeam.Logo?(a.uploadedLogo=!0,a.sendTeam()):swal("Empty Logo!","Please select Logo.","error")},a.sendTeam=function(){a.uploadedLogo&&e({url:hostName+"api/team/createorupdate",method:"POST",data:a.newTeam}).success(function(c){if(a.newTeam.Id>0){var d=g.Team.items.indexOf(a.newTeam);g.Team.items[d]=c}else g.Team.items.push(c);a.logoUploader.clearQueue(),b.close()}).error(function(a,b){swal("Err!",a.Message,"error")})},a.cancel=function(){b.dismiss("cancel")}}],size:c,backdrop:f,keyboard:h})}var g=this;g.Team=new c,g.Team.nextPage(),g.listviewSearchStat=!1,g.lvSearch=function(){g.listviewSearchStat=!0},g.open=function(a){f(!0,"lg",!0,!0,a)}}]),OnePiece.controller("gagCtrl",["authService","$sce","$scope","$rootScope","$timeout","$http","$stateParams","$uibModal","FileUploader","Gag","Tags","Tag","$anchorScroll","localStorageService","$injector",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(b,c,g,i){h.open({animation:b,templateUrl:"addPostForm",controller:["$scope","$sce","$uibModalInstance","FileUploader",function(b,c,g,h){b.Tags=new k,b.newPost={PostType:"GAG",Images:[],Videos:[],Tags:[],Title:"",Description:"",CreatedUserName:a.authentication.userName,CreatedUserAvatar:a.authentication.userInfo.Avatar},b.isShowProgressBar=!1,b.acceptFileFormats="",b.trustAsResourceUrl=c.trustAsResourceUrl,b.setDefaultStatus,b.setDefaultStatus=function(){b.wallImage=!1,b.wallGif=!1,b.wallVideo=!1,b.wallPostingVisible=!1},b.gagUploader=new h({url:hostName+"api/upload"}),b.gagUploader.onBeforeUploadItem=function(a){var b=n.get("authorizationData");b&&(a.headers.Authorization="Bearer "+b.token)},b.selectFiles=function(){var a=1;b.wallImage=!0,b.changeUploaderAcceptedFileFormat(a),b.uploadNewFiles()},b.selectGif=function(){var a=2;b.wallGif=!0,b.changeUploaderAcceptedFileFormat(a),b.uploadNewFiles()};var i=n.get("authorizationData");i&&(b.gagUploader.headers.Authorization="Bearer "+i.token),b.gagUploader.filters.push({name:"extensionFilter",fn:function(a,b){var c="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|mp4|".indexOf(c)!=-1||(swal("Invalid file format!","Please select a file with jpg, png, jpeg, bmp, gif or mp4 format and try again.","error"),!1)}},{name:"sizeFilter",fn:function(a,b){var c=parseInt(a.size);return c<=5242880||(swal("Selected file exceeds the 5MB file size limit!","Please choose a new file and try again.","error"),!1)}}),b.gagUploader.onAfterAddingAll=function(){b.gagUploader.queue.forEach(function(a){var c=a._file;b.newPost.Images.push({ImageType:"video/mp4"===c.type?"Gif":"Static",Url:URL.createObjectURL(c),TempFile:!0})})},b.changeUploaderAcceptedFileFormat=function(a){var b=$("#uploader")[0];switch(b.removeAttribute("accept"),a){case 1:$(b).attr("accept","image/jpg, image/png, image/jpeg, img/bmp"),$(b).attr("multiple","");break;case 2:$(b).attr("accept","image/gif, video/mp4"),b.removeAttribute("multiple")}},b.uploadNewFiles=function(){b.gagUploader.queue.length>0?swal({title:"Are you sure?",text:"Do you want to upload the current selected files?",type:"warning",showCancelButton:!0,cancelButtonText:"No",confirmButtonColor:"#be1101",confirmButtonText:"Yes",closeOnConfirm:!0},function(a){a?b.post():(b.gagUploader.clearQueue(),e(function(){$("#btnWallPosting").click(),$("#uploader").click()},10))}):e(function(){$("#uploader").click()},10)},b.getVideosType=function(a){return a.match(q.youtubeRegexp)?1:a.match(q.vimeoRegexp)?2:a.match(q.facebookRegexp)?3:0},b.post=function(){if(b.wallImage||b.wallGif)b.isShowProgressBar=!0,b.gagUploader.uploadAll(),b.gagUploader.onSuccessItem=function(a,c){b.newPost.Images.push({ImageType:"|gif|mp4|".indexOf(c.format)>-1?"Gif":"Static",Url:c.url,CropInfo:c.height+"_"+c.width,TempFile:!1})},b.gagUploader.onErrorItem=function(a,c,e){if(b.isShowProgressBar=!1,a.isUploaded=!1,a.isError=!1,401===e){var f=o.get("authService"),g=n.get("authorizationData");if(g&&g.useRefreshTokens)return void f.refreshToken();f.logOut(),d.$broadcast("showLoginForm")}else swal(c.Message,c.ExceptionMessage,"error")},b.gagUploader.onCompleteAll=function(){b.newPost.Images.length>0&&(b.newPost.Images.forEach(function(a,c){a.TempFile&&b.newPost.Images.splice(c,1)}),b.sendPost())};else if(b.newPost.Videos[0]){if(b.newPost.Videos[0].Url.match(q.youtubeRegexp)){var a=b.newPost.Videos[0].Url.replace(q.youtubeRegexp,"$1");b.newPost.Videos[0].Url="https://www.youtube.com/embed/"+a,b.newPost.Videos[0].Picture="https://img.youtube.com/vi/"+a+"/0.jpg",b.newPost.Videos[0].VideoType="Youtube"}else{var c=b.newPost.Videos[0].Url.match(q.vimeoRegexp);if(c){var e=b.newPost.Videos[0].Url.replace(q.vimeoRegexp,"$"+(c.length-1));b.newPost.Videos[0].Url="https://player.vimeo.com/video/"+e,b.newPost.Videos[0].VideoType="Vimeo"}else{var f=b.newPost.Videos[0].Url.match(q.facebookRegexp);f?b.newPost.Videos[0].VideoType="Facebook":b.newPost.Videos[0].VideoType="Stream"}}b.sendPost()}},b.sendPost=function(){f({url:hostName+"api/post/create",method:"POST",data:b.newPost}).success(function(a){swal("Đăng thành công!",a,"success"),b.gagUploader.clearQueue(),b.setDefaultStatus(),b.newPost={PostType:"GAG",Images:[],Videos:[],Tags:[],Title:"",Description:""}}).error(function(a,b){}).finally(function(){b.isShowProgressBar=!1})},b.clear=function(){swal({title:"Are you sure?",text:"Do you want clear all uploaded file?",type:"warning",showCancelButton:!0,cancelButtonText:"No",confirmButtonColor:"#be1101",confirmButtonText:"Yes",closeOnConfirm:!0},function(a){a&&(b.gagUploader.clearQueue(),b.setDefaultStatus,g.dismiss("cancel"),$("#btnWallPosting").click())})},b.cancel=function(){g.dismiss("cancel")}}],size:c,backdrop:g,keyboard:i})}var q=this;q.trustAsResourceUrl=b.trustAsResourceUrl,q.Gag=new j,q.Gag.slug=g.slug,q.Gag.getGag(function(a){q.newComment={Content:"",ActionForId:a.Id},q.sendComment=function(){q.newComment.Content.length<10?swal("Quá ngắn!","Ít nhất 10 ký tự thánh ơi!","error"):f({url:hostName+"api/comment/create",method:"POST",data:q.newComment}).success(function(b){q.newComment={Content:""},a.CommentList.items.push(b),a.CommentCount++}).error(function(a,b){}).finally(function(){})}}),q.youtubeRegexp=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\S*[^\w\s-])([\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,q.vimeoRegexp=/(?:https?:\/\/)?(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/,q.facebookRegexp=/^(https?:\/\/www\.facebook\.com\/(?:video\.php\?v=\d+|.*?\/videos\/\d+))/,q.showPostingForm=function(){p(!0,"lg",!0,!0)},d.$on("showPostingForm",function(){p(!0,"lg",!0,!0)})}]),OnePiece.controller("wallCtrl",["authService","$sce","$scope","$rootScope","$timeout","$http","$stateParams","$uibModal","FileUploader","Gag","Tags","Tag","$anchorScroll","localStorageService","$injector",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(b,c,g,i){h.open({animation:b,templateUrl:"addPostForm",controller:["$scope","$sce","$uibModalInstance","FileUploader",function(b,c,g,h){b.Tags=new k,b.newPost={PostType:"GAG",Images:[],Videos:[],Tags:[],Title:"",Description:"",CreatedUserName:a.authentication.userName,CreatedUserAvatar:a.authentication.userInfo.Avatar},b.isShowProgressBar=!1,b.acceptFileFormats="",b.trustAsResourceUrl=c.trustAsResourceUrl,b.setDefaultStatus,b.setDefaultStatus=function(){b.wallImage=!1,b.wallGif=!1,b.wallVideo=!1,b.wallPostingVisible=!1},b.gagUploader=new h({url:hostName+"api/upload"}),b.gagUploader.onBeforeUploadItem=function(a){var b=n.get("authorizationData");b&&(a.headers.Authorization="Bearer "+b.token)},b.selectFiles=function(){var a=1;b.wallImage=!0,b.changeUploaderAcceptedFileFormat(a),b.uploadNewFiles()},b.selectGif=function(){var a=2;b.wallGif=!0,b.changeUploaderAcceptedFileFormat(a),b.uploadNewFiles()};var i=n.get("authorizationData");i&&(b.gagUploader.headers.Authorization="Bearer "+i.token),b.gagUploader.filters.push({name:"extensionFilter",fn:function(a,b){var c="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|mp4|".indexOf(c)!=-1||(swal("Invalid file format!","Please select a file with jpg, png, jpeg, bmp, gif or mp4 format and try again.","error"),!1)}},{name:"sizeFilter",fn:function(a,b){var c=parseInt(a.size);return c<=5242880||(swal("Selected file exceeds the 5MB file size limit!","Please choose a new file and try again.","error"),!1)}}),b.gagUploader.onAfterAddingAll=function(){b.gagUploader.queue.forEach(function(a){var c=a._file;b.newPost.Images.push({ImageType:"video/mp4"===c.type?"Gif":"Static",Url:URL.createObjectURL(c),TempFile:!0})})},b.changeUploaderAcceptedFileFormat=function(a){var b=$("#uploader")[0];switch(b.removeAttribute("accept"),a){case 1:$(b).attr("accept","image/jpg, image/png, image/jpeg, img/bmp"),$(b).attr("multiple","");break;case 2:$(b).attr("accept","image/gif, video/mp4"),b.removeAttribute("multiple")}},b.uploadNewFiles=function(){b.gagUploader.queue.length>0?swal({title:"Are you sure?",text:"Do you want to upload the current selected files?",type:"warning",showCancelButton:!0,cancelButtonText:"No",confirmButtonColor:"#be1101",confirmButtonText:"Yes",closeOnConfirm:!0},function(a){a?b.post():(b.gagUploader.clearQueue(),e(function(){$("#btnWallPosting").click(),$("#uploader").click()},10))}):e(function(){$("#uploader").click()},10)},b.getVideosType=function(a){return a.match(q.youtubeRegexp)?1:a.match(q.vimeoRegexp)?2:a.match(q.facebookRegexp)?3:0},b.post=function(){if(b.wallImage||b.wallGif)b.isShowProgressBar=!0,b.gagUploader.uploadAll(),b.gagUploader.onSuccessItem=function(a,c){b.newPost.Images.push({ImageType:"|gif|mp4|".indexOf(c.format)>-1?"Gif":"Static",Url:c.url,CropInfo:c.height+"_"+c.width,TempFile:!1})},b.gagUploader.onErrorItem=function(a,c,e){if(b.isShowProgressBar=!1,a.isUploaded=!1,a.isError=!1,401===e){var f=o.get("authService"),g=n.get("authorizationData");if(g&&g.useRefreshTokens)return void f.refreshToken();f.logOut(),d.$broadcast("showLoginForm")}else swal(c.Message,c.ExceptionMessage,"error")},b.gagUploader.onCompleteAll=function(){b.newPost.Images.length>0&&(b.newPost.Images.forEach(function(a,c){a.TempFile&&b.newPost.Images.splice(c,1)}),b.sendPost())};else if(b.newPost.Videos[0]){if(b.newPost.Videos[0].Url.match(q.youtubeRegexp)){var a=b.newPost.Videos[0].Url.replace(q.youtubeRegexp,"$1");b.newPost.Videos[0].Url="https://www.youtube.com/embed/"+a,b.newPost.Videos[0].Picture="https://img.youtube.com/vi/"+a+"/0.jpg",b.newPost.Videos[0].VideoType="Youtube"}else{var c=b.newPost.Videos[0].Url.match(q.vimeoRegexp);if(c){var e=b.newPost.Videos[0].Url.replace(q.vimeoRegexp,"$"+(c.length-1));b.newPost.Videos[0].Url="https://player.vimeo.com/video/"+e,b.newPost.Videos[0].VideoType="Vimeo"}else{var f=b.newPost.Videos[0].Url.match(q.facebookRegexp);f?b.newPost.Videos[0].VideoType="Facebook":b.newPost.Videos[0].VideoType="Stream"}}b.sendPost()}},b.sendPost=function(){f({url:hostName+"api/post/create",method:"POST",data:b.newPost}).success(function(a){swal("Đăng thành công!",a,"success"),b.gagUploader.clearQueue(),b.setDefaultStatus(),b.newPost={PostType:"GAG",Images:[],Videos:[],Tags:[],Title:"",Description:""}}).error(function(a,b){}).finally(function(){b.isShowProgressBar=!1})},b.clear=function(){swal({title:"Are you sure?",text:"Do you want clear all uploaded file?",type:"warning",showCancelButton:!0,cancelButtonText:"No",confirmButtonColor:"#be1101",
confirmButtonText:"Yes",closeOnConfirm:!0},function(a){a&&(b.gagUploader.clearQueue(),b.setDefaultStatus,g.dismiss("cancel"),$("#btnWallPosting").click())})},b.cancel=function(){g.dismiss("cancel")}}],size:c,backdrop:g,keyboard:i})}var q=this;q.trustAsResourceUrl=b.trustAsResourceUrl,q.Gag=new j,q.Gag.filter=g.filter,q.Gag.slug=g.slug,g.filter&&"tag"==g.filter.toLowerCase()&&(q.CurrentTag=new l,q.CurrentTag.slug=g.slug,q.CurrentTag.getTag()),q.isMobile=angular.element("html").hasClass("ismobile"),q.isMobile||(q.PlayerTags=new k,q.PlayerTags.type="Player",q.PlayerTags.getTopTags(),q.TeamTags=new k,q.TeamTags.type="Team",q.TeamTags.getTopTags(),q.LeagueTags=new k,q.LeagueTags.type="League",q.LeagueTags.getTopTags()),q.youtubeRegexp=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\S*[^\w\s-])([\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,q.vimeoRegexp=/(?:https?:\/\/)?(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/,q.facebookRegexp=/^(https?:\/\/www\.facebook\.com\/(?:video\.php\?v=\d+|.*?\/videos\/\d+))/,q.getNewGags=function(){q.Gag.slug="",q.Gag.skip=0,q.Gag.nextPage(),m()},q.showPostingForm=function(){p(!0,"lg",!0,!0)},d.$on("showPostingForm",function(){p(!0,"lg",!0,!0)})}]),OnePiece.controller("postCtrl",["$sce","$timeout","$http","$state","$stateParams","FileUploader","Gag",function(a,b,c,d,e,f,g){var h=this,i=hostName+"api/post/update";h.Gag=new g,h.Gag.userFilter=e.username,h.Gag.filter=e.filter||"all",h.CurrentPost={},h.trustAsResourceUrl=a.trustAsResourceUrl,h.updatePost=function(a){c({url:i,method:"POST",data:a}).success(function(b){swal(b,"success"),a.$edit=!1}).error(function(a,b){swal(a.Message,a.ExceptionMessage,"error")})}}]),OnePiece.controller(),OnePiece.controller("postMngCtrl",["$sce","$timeout","$http","$state","$stateParams","$uibModal","FileUploader","Tags","Gag","localStorageService","authService",function(a,b,c,d,e,f,g,h,i,j,k){function l(a,d,e,g,h){f.open({animation:d,templateUrl:"editPostForm",controller:["$scope","$sce","$uibModalInstance","FileUploader",function(d,e,f,g){d.Tags=m.Tags,d.isShowProgressBar=!1,d.acceptFileFormats="",d.trustAsResourceUrl=e.trustAsResourceUrl,d.setDefaultStatus,d.setDefaultStatus=function(){d.wallImage=!1,d.wallGif=!1,d.wallVideo=!1,d.wallPostingVisible=!1},d.currentGag=a,d.updatePost=function(){c({url:o,method:"POST",data:d.currentGag}).success(function(a){swal(a,"success")}).error(function(a,b){swal(a.Message,a.ExceptionMessage,"error")})},d.gagUploader=new g({url:hostName+"api/upload"}),d.gagUploader.onBeforeUploadItem=function(a){var b=j.get("authorizationData");b&&(a.headers.Authorization="Bearer "+b.token)},d.selectFiles=function(){var a=1;d.wallImage=!0,d.changeUploaderAcceptedFileFormat(a),d.uploadNewFiles()},d.selectGif=function(){var a=2;d.wallGif=!0,d.changeUploaderAcceptedFileFormat(a),d.uploadNewFiles()};var h=j.get("authorizationData");h&&(d.gagUploader.headers.Authorization="Bearer "+h.token),d.gagUploader.filters.push({name:"extensionFilter",fn:function(a,b){var c="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|mp4|".indexOf(c)!=-1||(swal("Invalid file format!","Please select a file with jpg, png, jpeg, bmp, gif or mp4 format and try again.","error"),!1)}},{name:"sizeFilter",fn:function(a,b){var c=parseInt(a.size);return c<=5242880||(swal("Selected file exceeds the 5MB file size limit!","Please choose a new file and try again.","error"),!1)}}),d.gagUploader.onAfterAddingAll=function(){d.gagUploader.queue.forEach(function(a){var b=a._file;d.newPost.Images.push({ImageType:"video/mp4"===b.type?"Gif":"Static",Url:URL.createObjectURL(b),TempFile:!0})})},d.changeUploaderAcceptedFileFormat=function(a){var b=$("#uploader")[0];switch(b.removeAttribute("accept"),a){case 1:$(b).attr("accept","image/jpg, image/png, image/jpeg, img/bmp"),$(b).attr("multiple","");break;case 2:$(b).attr("accept","image/gif, video/mp4"),b.removeAttribute("multiple")}},d.uploadNewFiles=function(){d.gagUploader.queue.length>0?swal({title:"Are you sure?",text:"Do you want to upload the current selected files?",type:"warning",showCancelButton:!0,cancelButtonText:"No",confirmButtonColor:"#be1101",confirmButtonText:"Yes",closeOnConfirm:!0},function(a){a?d.post():(d.gagUploader.clearQueue(),b(function(){$("#btnWallPosting").click(),$("#uploader").click()},10))}):b(function(){$("#uploader").click()},10)},d.getVideosType=function(a){return a.match(m.youtubeRegexp)?1:a.match(m.vimeoRegexp)?2:a.match(m.facebookRegexp)?3:0},d.post=function(){if(d.wallImage||d.wallGif)d.isShowProgressBar=!0,d.gagUploader.uploadAll(),d.gagUploader.onSuccessItem=function(a,b){d.newPost.Images.push({ImageType:"|gif|mp4|".indexOf(b.format)>-1?"Gif":"Static",Url:b.url,TempFile:!1})},d.gagUploader.onErrorItem=function(a,b,c){if(d.isShowProgressBar=!1,a.isUploaded=!1,a.isError=!1,401===c){var e=$injector.get("authService"),f=j.get("authorizationData");if(f&&f.useRefreshTokens)return void e.refreshToken();e.logOut(),$rootScope.$broadcast("showLoginForm")}else swal(b.Message,b.ExceptionMessage,"error")},d.gagUploader.onCompleteAll=function(){d.newPost.Images.length>0&&(d.newPost.Images.forEach(function(a,b){a.TempFile&&d.newPost.Images.splice(b,1)}),d.sendPost())};else if(d.newPost.Videos[0]){if(d.newPost.Videos[0].Url.match(m.youtubeRegexp)){var a=d.newPost.Videos[0].Url.replace(m.youtubeRegexp,"$1");d.newPost.Videos[0].Url="https://www.youtube.com/embed/"+a,d.newPost.Videos[0].VideoType="Youtube"}else{var b=d.newPost.Videos[0].Url.match(m.vimeoRegexp);if(b){var c=d.newPost.Videos[0].Url.replace(m.vimeoRegexp,"$"+(b.length-1));d.newPost.Videos[0].Url="https://player.vimeo.com/video/"+c,d.newPost.Videos[0].VideoType="Vimeo"}else{var e=d.newPost.Videos[0].Url.match(m.facebookRegexp);e?d.newPost.Videos[0].VideoType="Facebook":d.newPost.Videos[0].VideoType="Stream"}}d.sendPost()}},d.sendPost=function(){c({url:hostName+"api/post/create",method:"POST",data:d.newPost}).success(function(a){swal("Đăng thành công!",a,"success"),d.gagUploader.clearQueue(),d.setDefaultStatus(),d.newPost={PostType:"GAG",Images:[],Videos:[],Tags:[],Title:"",Description:""}}).error(function(a,b){}).finally(function(){d.isShowProgressBar=!1})},d.clear=function(){swal({title:"Are you sure?",text:"Do you want clear all uploaded file?",type:"warning",showCancelButton:!0,cancelButtonText:"No",confirmButtonColor:"#be1101",confirmButtonText:"Yes",closeOnConfirm:!0},function(a){a&&(d.gagUploader.clearQueue(),d.setDefaultStatus,f.dismiss("cancel"),$("#btnWallPosting").click())})},d.cancel=function(){f.dismiss("cancel")}}],size:e,backdrop:g,keyboard:h})}var m=this;k.authentication.isAdmin||d.go("pages.wall");var n=hostName+"api/post/delete",o=hostName+"api/post/update";m.Gag=new i,m.Gag.filter=e.filter||"all",m.CurrentPost={},m.trustAsResourceUrl=a.trustAsResourceUrl,m.ApprovalPost=function(a){a.IsActived=!a.IsActived,c({url:o,method:"POST",data:a}).success(function(a){}).error(function(b,c){swal(b.Message,b.ExceptionMessage,"error"),a.IsActived=!1})},m.deletePost=function(a){c({url:n,method:"POST",data:a}).success(function(a){swal(a,"success")}).error(function(a,b){swal(a.Message,a.ExceptionMessage,"error")})},m.showPostingForm=function(a){l(a,!0,"lg",!0,!0)}}]),OnePiece.factory("Gag",["$http","$sce","Comment",function(a,b,c){var d=function(){this.items=[],this.busy=!1,this.skip=0,this.take=5,this.filter="",this.slug="",this.userFilter="",this.item=null};return d.prototype.nextPage=function(){var b=this;if(!b.busy){b.busy=!0;var d=hostName+"api/post/getgags";a.get(d,{params:{skip:b.skip,take:b.take,slug:b.slug,filter:b.filter,userFilter:b.userFilter}}).success(function(a){var d=a;0!=d.length&&(d.forEach(function(a){a.PublishedDate=new Date(a.PublishedDate),b.items.push(a),a.CommentList=new c,a.CommentList.actionFor="Post",a.CommentList.actionForId=a.Id,a.CommentList.skip=0,a.CommentList.take=2,a.CommentList.nextPage()}),b.busy=!1,b.skip+=b.take)})}},d.prototype.getAllGags=function(){var b=this;if(!b.busy){b.busy=!0;var d=hostName+"api/post/getallgags";a.get(d,{params:{skip:b.skip,take:b.take}}).success(function(a){var d=a;0!=d.length&&(d.forEach(function(a){a.PublishedDate=new Date(a.PublishedDate),b.items.push(a),a.CommentList=new c,a.CommentList.actionFor="Post",a.CommentList.actionForId=a.Id,a.CommentList.skip=0,a.CommentList.take=2,a.CommentList.nextPage()}),b.busy=!1,b.skip+=b.take)})}},d.prototype.getGag=function(b){var d=this;if(!d.busy){d.busy=!0;var e=hostName+"api/post/getgag";a.get(e,{params:{slug:d.slug}}).success(function(a){var e=a;e.PublishedDate=new Date(e.PublishedDate),d.item=e,e.CommentList=new c,e.CommentList.actionFor="Post",e.CommentList.actionForId=e.Id,e.CommentList.skip=0,e.CommentList.take=5,e.CommentList.nextPage(),d.busy=!1,b(e)})}},d}]).factory("Comment",["$http","$sce",function(a,b){var c=function(){this.items=[],this.busy=!1,this.skip=0,this.take=5,this.actionForId=0,this.actionFor="",this.remain=0};return c.prototype.nextPage=function(){var b=this;if(!b.busy){b.busy=!0;var c=hostName+"api/comment/getcomments";a.get(c,{params:{skip:b.skip,take:b.take,actionForId:b.actionForId,actionFor:b.actionFor}}).success(function(a){var c=a;0!=c.length&&(c.forEach(function(a){a.CreatedDate=new Date(a.CreatedDate),b.items.push(a)}),b.busy=!1,b.skip+=b.take)})}},c}]).factory("League",["$http","$sce",function(a,b){var c=function(){this.items=[],this.busy=!1,this.skip=0,this.take=30,this.count=0};return c.prototype.nextPage=function(){var b=this;if(!b.busy){b.busy=!0;var c=hostName+"api/league/getleagues";a.get(c,{params:{skip:b.skip,take:b.take}}).success(function(a){var c=a.leagues;b.count=a.count,0!=c.length&&(c.forEach(function(a){b.items.push(a)}),b.busy=!1,b.skip+=b.take)})}},c}]).factory("Team",["$http","$sce",function(a,b){var c=function(){this.items=[],this.busy=!1,this.skip=0,this.take=30,this.count=0};return c.prototype.nextPage=function(){var b=this;if(!b.busy){b.busy=!0;var c=hostName+"api/team/getteams";a.get(c,{params:{skip:b.skip,take:b.take}}).success(function(a){var c=a.teams;b.count=a.count,0!=c.length&&(c.forEach(function(a){b.items.push(a)}),b.busy=!1,b.skip+=b.take)})}},c}]).factory("Player",["$http","$sce",function(a,b){var c=function(){this.items=[],this.busy=!1,this.skip=0,this.take=60,this.count=0};return c.prototype.nextPage=function(){var b=this;if(!b.busy){b.busy=!0;var c=hostName+"api/player/getplayers";a.get(c,{params:{skip:b.skip,take:b.take}}).success(function(a){var c=a.players;b.count=a.count,0!=c.length&&(c.forEach(function(a){b.items.push(a)}),b.busy=!1,b.skip+=b.take)})}},c}]).factory("Tags",["$http","$sce",function(a,b){var c=function(){this.items=[],this.skip=0,this.take=5,this.type=""};return c.prototype.getAutoCompleteTags=function(b){var c=this,d=hostName+"api/tags/gettagsautocomplete";return a.get(d,{params:{searchTerm:b,take:c.take,skip:c.skip}}).then(function(a){var b=a.data;if(0!=b.length)return b})},c.prototype.getTopTags=function(){var b=this,c=hostName+"api/tags/gettoptags";return a.get(c,{params:{top:30,type:b.type}}).then(function(a){a.data.length>0&&(b.items=a.data)})},c}]).factory("Tag",["$http","$sce",function(a,b){var c=function(){this.item={},this.slug=""};return c.prototype.getTag=function(){var b=this,c=hostName+"api/tags/gettag";return a.get(c,{params:{slug:b.slug}}).then(function(a){b.item=a.data})},c}]).factory("authService",["$http","$q","localStorageService","ngAuthSettings",function(a,b,c,d){var e=d.apiServiceBaseUri,f={},g={isAuth:!1,userName:"",userRole:"",isAdmin:!1,useRefreshTokens:!1,userInfo:{}},h={provider:"",userName:"",userRole:"",isAuth:!1,externalAccessToken:""},i=function(b){return k(),a.post(e+"api/account/register",b).then(function(a){return a})},j=function(f){var h="grant_type=password&username="+f.userName+"&password="+f.password;f.useRefreshTokens&&(h=h+"&client_id="+d.clientId);var i=b.defer();return a.post(e+"token",h,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){g.isAdmin="Admin"===a.userRoles||"SuperAdmin"===a.userRoles,f.useRefreshTokens?c.set("authorizationData",{token:a.access_token,userName:a.userName,userRole:a.userRoles,isAdmin:g.isAdmin,userInfo:a.userInfo,refreshToken:a.refresh_token,useRefreshTokens:!0}):c.set("authorizationData",{token:a.access_token,userName:a.userName,userRole:a.userRoles,isAdmin:g.isAdmin,userInfo:a.userInfo,refreshToken:"",useRefreshTokens:!1}),g.isAuth=!0,g.userName=a.userName,g.userRole=a.userRoles,g.useRefreshTokens=f.useRefreshTokens,g.userInfo=JSON.parse(a.userInfo),i.resolve(a)}).error(function(a,b){k(),i.reject(a)}),i.promise},k=function(){c.remove("authorizationData"),g.isAuth=!1,g.userName="",g.useRefreshTokens=!1,g.userInfo={}},l=function(){var a=c.get("authorizationData");a&&(g.isAuth=!0,g.userName=a.userName,g.userRole=a.userRoles,g.isAdmin=a.isAdmin,g.useRefreshTokens=a.useRefreshTokens,g.userInfo=a.userInfo?JSON.parse(a.userInfo):{})},m=function(b){return b.UserName=g.userName,a.post(e+"api/account/update",b).then(function(a){return a})},n=function(b){var c=hostName+"api/account/user";return a.get(c,{params:{userName:b}}).then(function(a){return a})},o=function(b,c,d){var f={OldPassword:b,NewPassword:c,ConfirmPassword:d};return a.post(e+"api/account/changepassword",f).then(function(a){return a})},p=function(){var f=b.defer(),h=c.get("authorizationData");if(h&&h.useRefreshTokens){var i="grant_type=refresh_token&refresh_token="+h.refreshToken+"&client_id="+d.clientId;c.remove("authorizationData"),a.post(e+"token",i,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){c.set("authorizationData",{token:a.access_token,userName:a.userName,userInfo:a.userInfo,userRole:a.userRoles,isAdmin:g.isAdmin,refreshToken:a.refresh_token,useRefreshTokens:!0}),f.resolve(a)}).error(function(a,b){k(),f.reject(a)})}return f.promise},q=function(d){var f=b.defer();return a.get(e+"api/account/ObtainLocalAccessToken",{params:{provider:d.provider,externalAccessToken:d.externalAccessToken}}).success(function(a){g.isAdmin="Admin"===a.userRoles||"SuperAdmin"===a.userRoles,c.set("authorizationData",{token:a.access_token,userName:a.userName,userRole:a.userRoles,isAdmin:g.isAdmin,userInfo:a.userInfo,refreshToken:"",useRefreshTokens:!1}),g.isAuth=!0,g.userName=a.userName,g.userRole=a.userRoles,g.useRefreshTokens=!1,g.userInfo=JSON.parse(a.userInfo),f.resolve(a)}).error(function(a,b){k(),f.reject(a)}),f.promise},r=function(d){var f=b.defer();return a.post(e+"api/account/registerexternal",d).success(function(a){g.isAdmin="Admin"===a.userRoles||"SuperAdmin"===a.userRoles,c.set("authorizationData",{token:a.access_token,userName:a.userName,userRole:a.userRoles,isAdmin:g.isAdmin,userInfo:a.userInfo,refreshToken:"",useRefreshTokens:!1}),g.isAuth=!0,g.userName=a.userName,g.userRole=a.userRoles,g.useRefreshTokens=!1,g.userInfo=JSON.parse(a.userInfo),f.resolve(a)}).error(function(a,b){k(),f.reject(a)}),f.promise};return f.saveRegistration=i,f.login=j,f.logOut=k,f.fillAuthData=l,f.updateProfile=m,f.getUserProfile=n,f.changePassword=o,f.authentication=g,f.refreshToken=p,f.obtainAccessToken=q,f.externalAuthData=h,f.registerExternal=r,f}]).factory("authInterceptorService",["$q","$injector","$location","localStorageService","$rootScope",function(a,b,c,d,e){var f={},g=function(a){a.headers=a.headers||{};var b=d.get("authorizationData");return b&&(a.headers.Authorization="Bearer "+b.token),a},h=function(c){if(401===c.status){var f=(b.get("$state"),b.get("authService")),g=d.get("authorizationData");if(g&&g.useRefreshTokens)return f.refreshToken(),a.reject(c);f.logOut(),e.$broadcast("showLoginForm")}else swal(c.statusText,c.data.Message,"error");return a.reject(c)};return f.request=g,f.responseError=h,f}]),OnePiece.filter("moment",function(){return function(a){return moment.locale("vi"),moment(a).fromNow()}}).filter("trustAsResourceUrl",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]).filter("stringRes",function(){return function(a){var b={back:"Cũ hơn",comment:"bình luận",forward:"Mới hơn",postOn:"Đăng",sameTagsGags:"Cùng tags",sameTagsGagsDescription:"Những bài cùng tags với bài này",sameUserGags:"Đăng bởi",sameUserGagsDescription:"Những bài được đăng bởi",titlePlaceHolder:"Tiêu đề..."};return b[a]||a}}).filter("resize",function(){return function(a,b,c){if(!a)return a;var d=[];return b&&d.push("w_"+b),c&&d.push("h_"+c),a.replace("upload","upload/"+d.join(","))}}),OnePiece.directive("fullCalendar",function(){return{restrict:"A",link:function(a,b){b.fullCalendar({contentHeight:"auto",theme:!0,header:{right:"",center:"prev, title, next",left:""},defaultDate:"2014-06-12",editable:!0,events:[{title:"All Day",start:"2014-06-01",className:"bgm-cyan"},{title:"Long Event",start:"2014-06-07",end:"2014-06-10",className:"bgm-orange"},{id:999,title:"Repeat",start:"2014-06-09",className:"bgm-lightgreen"},{id:999,title:"Repeat",start:"2014-06-16",className:"bgm-blue"},{title:"Meet",start:"2014-06-12",end:"2014-06-12",className:"bgm-teal"},{title:"Lunch",start:"2014-06-12",className:"bgm-gray"},{title:"Birthday",start:"2014-06-13",className:"bgm-pink"},{title:"Google",url:"http://google.com/",start:"2014-06-28",className:"bgm-bluegray"}]})}}}).directive("calendar",["$compile",function(a){return{restrict:"A",scope:{select:"&",actionLinks:"="},link:function(b,c,d){var e=new Date,f=(e.getDate(),e.getMonth()),g=e.getFullYear();c.fullCalendar({header:{right:"",center:"prev, title, next",left:""},theme:!0,selectable:!0,selectHelper:!0,editable:!0,events:[{title:"Hangout with friends",start:new Date(g,f,1),allDay:!0,className:"bgm-cyan"},{title:"Meeting with client",start:new Date(g,f,10),allDay:!0,className:"bgm-red"},{title:"Repeat Event",start:new Date(g,f,18),allDay:!0,className:"bgm-blue"},{title:"Semester Exam",start:new Date(g,f,20),allDay:!0,className:"bgm-green"},{title:"Soccor match",start:new Date(g,f,5),allDay:!0,className:"bgm-purple"},{title:"Coffee time",start:new Date(g,f,21),allDay:!0,className:"bgm-orange"},{title:"Job Interview",start:new Date(g,f,5),allDay:!0,className:"bgm-dark"},{title:"IT Meeting",start:new Date(g,f,5),allDay:!0,className:"bgm-cyan"},{title:"Brunch at Beach",start:new Date(g,f,1),allDay:!0,className:"bgm-purple"},{title:"Live TV Show",start:new Date(g,f,15),allDay:!0,className:"bgm-orange"},{title:"Software Conference",start:new Date(g,f,25),allDay:!0,className:"bgm-blue"},{title:"Coffee time",start:new Date(g,f,30),allDay:!0,className:"bgm-orange"},{title:"Job Interview",start:new Date(g,f,30),allDay:!0,className:"bgm-dark"}],select:function(a,c,d){b.select({start:a,end:c})}}),c.find(".fc-toolbar").append(a(b.actionLinks)(b))}}}]).directive("calendarView",function(){return{restrict:"A",link:function(a,b,c){b.on("click",function(){$("#calendar").fullCalendar("changeView",c.calendarView)})}}}),OnePiece.directive("weatherWidget",function(){return{restrict:"A",link:function(a,b){$.simpleWeather({location:"Austin, TX",woeid:"",unit:"f",success:function(a){html='<div class="weather-status">'+a.temp+"&deg;"+a.units.temp+"</div>",html+='<ul class="weather-info"><li>'+a.city+", "+a.region+"</li>",html+='<li class="currently">'+a.currently+"</li></ul>",html+='<div class="weather-icon wi-'+a.code+'"></div>',html+='<div class="dash-widget-footer"><div class="weather-list tomorrow">',html+='<span class="weather-list-icon wi-'+a.forecast[2].code+'"></span><span>'+a.forecast[1].high+"/"+a.forecast[1].low+"</span><span>"+a.forecast[1].text+"</span>",html+="</div>",html+='<div class="weather-list after-tomorrow">',html+='<span class="weather-list-icon wi-'+a.forecast[2].code+'"></span><span>'+a.forecast[2].high+"/"+a.forecast[2].low+"</span><span>"+a.forecast[2].text+"</span>",html+="</div></div>",$("#weather-widget").html(html)},error:function(a){$("#weather-widget").html("<p>"+a+"</p>")}})}}}).directive("swalBasic",function(){return{restrict:"A",link:function(a,b,c){b.click(function(){swal("Here's a message!")})}}}).directive("swalText",function(){return{restrict:"A",link:function(a,b,c){b.click(function(){swal("Here's a message!","Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed lorem erat, tincidunt vitae ipsum et, pellentesque maximus enim. Mauris eleifend ex semper, lobortis purus sed, pharetra felis")})}}}).directive("swalSuccess",function(){return{restrict:"A",link:function(a,b,c){b.click(function(){swal("Good job!","Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed lorem erat, tincidunt vitae ipsum et, pellentesque maximus enim. Mauris eleifend ex semper, lobortis purus sed, pharetra felis","success")})}}}).directive("swalWarning",function(){return{restrict:"A",link:function(a,b,c){b.click(function(){swal({title:"Are you sure?",text:"You will not be able to recover this imaginary file!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(){swal("Deleted!","Your imaginary file has been deleted.","success")})})}}}).directive("swalParams",function(){return{restrict:"A",link:function(a,b,c){b.click(function(){swal({title:"Are you sure?",text:"You will not be able to recover this imaginary file!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel plx!",closeOnConfirm:!1,closeOnCancel:!1},function(a){a?swal("Deleted!","Your imaginary file has been deleted.","success"):swal("Cancelled","Your imaginary file is safe :)","error")})})}}}).directive("swalImg",function(){return{restrict:"A",link:function(a,b,c){b.click(function(){swal({title:"Sweet!",text:"Here's a custom image.",imageUrl:"img/thumbs-up.png"})})}}}).directive("swalTimer",function(){return{restrict:"A",link:function(a,b,c){b.click(function(){swal({title:"Auto close alert!",text:"I will close in 2 seconds.",timer:2e3,showConfirmButton:!1})})}}}).directive("growlDemo",function(){return{restrict:"A",link:function(a,b,c){function d(a,b,c,d,e,f){$.growl({icon:c,title:" Bootstrap Growl ",message:"Turning standard Bootstrap alerts into awesome notifications",url:""},{element:"body",type:d,allow_dismiss:!0,placement:{from:a,align:b},offset:{x:20,y:85},spacing:10,z_index:1031,delay:2500,timer:1e3,url_target:"_blank",mouse_over:!1,animate:{enter:e,exit:f},icon_type:"class",template:'<div data-growl="container" class="alert" role="alert"><button type="button" class="close" data-growl="dismiss"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><span data-growl="icon"></span><span data-growl="title"></span><span data-growl="message"></span><a href="#" data-growl="url"></a></div>'})}b.on("click",function(a){a.preventDefault();var b=c.from,e=c.align,f=c.icon,g=c.type,h=c.animationIn,i=c.animationOut;d(b,e,f,g,h,i)})}}}),OnePiece.directive("fgLine",function(){return{restrict:"C",link:function(a,b){$(".fg-line")[0]&&($("body").on("focus",".form-control",function(){$(this).closest(".fg-line").addClass("fg-toggled")}),$("body").on("blur",".form-control",function(){var a=$(this).closest(".form-group"),b=a.find(".form-control").val();a.hasClass("fg-float")?0==b.length&&$(this).closest(".fg-line").removeClass("fg-toggled"):$(this).closest(".fg-line").removeClass("fg-toggled")}))}}}).directive("autoSize",function(){return{restrict:"A",link:function(a,b){b[0]&&autosize(b)}}}).directive("selectPicker",function(){return{restrict:"A",link:function(a,b,c){b.selectpicker()}}}).directive("inputMask",function(){return{restrict:"A",scope:{inputMask:"="},link:function(a,b){b.mask(a.inputMask.mask)}}}).directive("colordPicker",function(){return{restrict:"A",link:function(a,b,c){$(b).each(function(){var a=$(this).closest(".cp-container").find(".cp-value");$(this).farbtastic(a)})}}}).directive("formControl",function(){return{restrict:"C",link:function(a,b,c){angular.element("html").hasClass("ie9")&&$("input, textarea").placeholder({customClass:"ie9-placeholder"})}}}).directive("enterKey",function(){return function(a,b,c){b.bind("keydown keypress",function(b){var d=b.which||b.keyCode;13===d&&(a.$apply(function(){a.$eval(c.enterKey)}),b.preventDefault())})}}),OnePiece.directive("mediaElement",function(){return{restrict:"A",link:function(a,b){b.mediaelementplayer()}}}).directive("lightbox",function(){return{restrict:"C",link:function(a,b){a.$on("onRepeatLast_lightbox",function(a,c,d){var e=b.find(".wip-item");e.each(function(a,c){var d=$(c).attr("href")||$(c).attr("data-src");if(d)if(d=d.replace("upload","upload/w_"+Math.round($(c).width())),d.indexOf(".gif")==-1&&d.indexOf(".mp4")==-1){if(1==e.length){var f=new Image;f.src=d,$(f).on("load",function(){$(c).css("padding-bottom",0),$(c).height(f.height-1)})}$(c).css("background-image","url("+d+")"),b.lightGallery({enableTouch:!0,thumbnail:!0,hash:!1,thumbContHeight:120})}else{var g=$(c),h=g.find("img");h.attr("src",d.replace(".gif",".jpg").replace(".mp4",".jpg")),d.indexOf("video")==-1&&h.attr("data-gif",d.replace("upload/","upload/fl_awebp.lossy,").replace(".gif",".webp").replace(".mp4",".webp")),h.attr("data-wait",!0),h.attr("data-playon","click"),h.unwrap(),h.on("load",function(){h.attr("height",h.height()),h.attr("width",h.width()),b.height(h.height()),h.gifplayer({label:""});var a=moment().valueOf();b.attr("id","gp_"+a),b.selector="#gp_"+a,b.scrolling({checkScrolling:!0}),b.on("scrollin",function(a,b){var c=$(a.target),d=c.find("img.gifplayer-ready:visible");d.length>0&&d.gifplayer("play")}),b.on("scrollout",function(a,b){var c=$(a.target),d=c.find("img.gifplayer-ready");d.gifplayer("stop")})})}})})}}}).directive("onLastRepeat",function(){return{restrict:"A",link:function(a,b,c){a.$last&&setTimeout(function(){a.$emit("onRepeatLast_"+c.onLastRepeat,b,c)},1)}}}),OnePiece.directive("gag",["$http",function(a){return{restrict:"E",scope:{gag:"=",single:"="},templateUrl:appBaseUrl+"modules/template/gag.html",link:function(b,c){b.shareToFacebook=function(){var a={method:"feed",link:OnePieceData.AbsoluteUri+"gag/"+b.gag.Slug,name:b.gag.Title,caption:"BONGVL.VN",description:b.gag.Description};b.gag.Images[0]?a.picture=b.gag.Images[0].Url:(a.picture=b.gag.Videos[0].Picture,a.source=b.gag.Videos[0].Url),FB.ui(a,function(a){a&&!a.error_message&&swal("Chia sẻ thành công!","Gag này đã được đăng lên Facebook của bạn!","success")})},b.shareToGooglePlus=function(){alert("TO DO")},b.newComment={Content:"",ActionForId:b.gag.Id},b.sendComment=function(){b.newComment.Content.length<10?swal("Quá ngắn!","Ít nhất 10 ký tự thánh ơi!","error"):a({url:hostName+"api/comment/create",method:"POST",data:b.newComment}).success(function(a){b.newComment={Content:""},b.gag.CommentList.items.push(a),b.gag.CommentCount++}).error(function(a,b){}).finally(function(){})},b.newLike={ActionForId:b.gag.Id},b.toggleLike=function(){a({url:hostName+"api/like/toggle",method:"POST",data:b.newLike}).success(function(a){b.gag.Liked=!b.gag.Liked,b.gag.LikeCount=b.gag.Liked?b.gag.LikeCount+1:b.gag.LikeCount-1}).error(function(a,b){})}}}}]).directive("topTag",["$http",function(a){return{restrict:"E",scope:{tags:"=",header:"@",subHeader:"@"},templateUrl:appBaseUrl+"modules/template/top-tag.html"}}]).directive("changeLayout",function(){return{restrict:"A",scope:{changeLayout:"="},link:function(a,b,c){"1"===a.changeLayout&&b.prop("checked",!0),b.on("change",function(){b.is(":checked")?(localStorage.setItem("ma-layout-status",1),a.$apply(function(){a.changeLayout="1"})):(localStorage.setItem("ma-layout-status",0),a.$apply(function(){a.changeLayout="0"}))})}}}).directive("toggleSidebar",function(){return{restrict:"A",scope:{modelLeft:"=",modelRight:"="},link:function(a,b,c){b.on("click",function(){"mainmenu"===b.data("target")&&(a.modelLeft===!1?a.$apply(function(){a.modelLeft=!0}):a.$apply(function(){a.modelLeft=!1})),"chat"===b.data("target")&&(a.modelRight===!1?a.$apply(function(){a.modelRight=!0}):a.$apply(function(){a.modelRight=!1}))})}}}).directive("toggleSubmenu",function(){return{restrict:"A",link:function(a,b,c){b.click(function(){b.parent().toggleClass("toggled"),b.parent().find("ul").stop(!0,!1).slideToggle(200)})}}}).directive("stopPropagate",function(){return{restrict:"C",link:function(a,b){b.on("click",function(a){a.stopPropagation()})}}}).directive("aPrevent",function(){return{restrict:"C",link:function(a,b){b.on("click",function(a){a.preventDefault()})}}}).directive("print",function(){return{restrict:"A",link:function(a,b){b.click(function(){window.print()})}}}),OnePiece.directive("html",["nicescrollService",function(a){return{restrict:"E",link:function(b,c){c.hasClass("ismobile")||$(".login-content")[0]||a.niceScroll(c,"rgba(0,0,0,0.3)","5px")}}}]).directive("tableResponsive",["nicescrollService",function(a){return{restrict:"C",link:function(b,c){$("html").hasClass("ismobile")||a.niceScroll(c,"rgba(0,0,0,0.3)","5px")}}}]).directive("chosenResults",["nicescrollService",function(a){return{restrict:"C",link:function(b,c){$("html").hasClass("ismobile")||a.niceScroll(c,"rgba(0,0,0,0.3)","5px")}}}]).directive("tabNav",["nicescrollService",function(a){return{restrict:"C",link:function(b,c){$("html").hasClass("ismobile")||a.niceScroll(c,"rgba(0,0,0,0.3)","2px")}}}]).directive("cOverflow",["nicescrollService",function(a){return{restrict:"C",link:function(b,c){$("html").hasClass("ismobile")||a.niceScroll(c,"rgba(0,0,0,0.5)","5px")}}}]).directive("btn",function(){return{restrict:"C",link:function(a,b){b.hasClass("btn-icon")||b.hasClass("btn-float")?Waves.attach(b,["waves-circle"]):b.hasClass("btn-light")?Waves.attach(b,["waves-light"]):Waves.attach(b),Waves.init()}}}).directive("scrollHide",["$timeout","$window",function(a,b){return{restrict:"A",link:function(c,d,e){var f,g=0;angular.element(b).bind("scroll",function(){var b=angular.element(document.getElementsByTagName("body")),c=b[0].scrollTop;c&&(console.log(c>=g),c<=g?(d.removeClass("invisible"),d.removeClass("animated fadeOutDown")):(d.addClass("invisible"),d.addClass("animated fadeOutDown"))),f=a(function(){g=c},60)})}}}]),OnePiece.directive("ngThumb",["$window",function(a){var b={support:!(!a.FileReader||!a.CanvasRenderingContext2D),isFile:function(b){return angular.isObject(b)&&b instanceof a.File},isImage:function(a){var b="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(b)!==-1}};return{restrict:"A",template:"<canvas/>",link:function(a,c,d){function e(a){var b=new Image;b.onload=f,b.src=a.target.result}function f(){var a=g.width||this.width/this.height*g.height,b=g.height||this.height/this.width*g.width;h.attr({width:a,height:b}),h[0].getContext("2d").drawImage(this,0,0,a,b)}if(b.support){var g=a.$eval(d.ngThumb);if(b.isFile(g.file)&&b.isImage(g.file)){var h=c.find("canvas"),i=new FileReader;i.onload=e,i.readAsDataURL(g.file)}}}}}]).directive("ngThumbBackground",["$window",function(a){var b={isFile:function(b){return angular.isObject(b)&&b instanceof a.File},isImage:function(a){var b="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(b)!==-1}};return{restrict:"A",link:function(a,c,d){function e(a){var b=new Image;b.src=a.target.result,c.css("background-image","url("+b.src+")"),c.height(f.height),c.width(f.width)}var f=a.$eval(d.ngThumbBackground);if(b.isFile(f.file)&&b.isImage(f.file)){var g=new FileReader;g.onload=e,g.readAsDataURL(f.file)}}}}]).directive("ngImageSrc",["$window",function(a){var b={isFile:function(b){return angular.isObject(b)&&b instanceof a.File},isImage:function(a){var b="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(b)!==-1}};return{restrict:"A",link:function(a,c,d){function e(a){var b=new Image;b.src=a.target.result,c.css("background-image","url("+b.src+")"),c.attr("href",b.src),c.append(b)}var f=a.$eval(d.ngImageSrc);if(b.isFile(f.file)&&b.isImage(f.file)){var g=new FileReader;g.onload=e,g.readAsDataURL(f.file)}}}}]),OnePiece.service("messageService",["$resource",function(a){this.getMessage=function(a,b,c){return{}}}]).service("bestsellingService",["$resource",function(a){
this.getBestselling=function(b,c,d){var e=a("data/best-selling.json");return e.get({img:b,name:c,range:d})}}]).service("todoService",["$resource",function(a){this.getTodo=function(b){var c=a("data/todo.json");return c.get({todo:b})}}]).service("recentitemService",["$resource",function(a){this.getRecentitem=function(b,c,d){var e=a("data/recent-items.json");return e.get({id:b,name:c,price:d})}}]).service("recentpostService",["$resource",function(a){this.getRecentpost=function(b,c,d){var e=a("data/messages-notifications.json");return e.get({img:b,user:c,text:d})}}]).service("tableService",[function(){this.data=[{id:10238,name:"Marc Barnes",email:"marc.barnes54@example.com",username:"MarcBarnes",contact:"(382)-122-5003"}]}]).service("nicescrollService",function(){var a={};return a.niceScroll=function(a,b,c){$(a).niceScroll({cursorcolor:b,cursorborder:0,cursorborderradius:0,cursorwidth:c,bouncescroll:!0,mousescrollstep:100,autohidemode:!1})},a}).service("growlService",function(){var a={};return a.growl=function(a,b){$.growl({message:a},{type:b,allow_dismiss:!1,label:"Cancel",className:"btn-xs btn-inverse",placement:{from:"top",align:"right"},delay:2500,animate:{enter:"animated bounceIn",exit:"animated bounceOut"},offset:{x:20,y:85}})},a}),angular.module("OnePiece").run(["$templateCache",function(a){"use strict";a.put("wwwroot/app/template/chat.html",'<div class="chat-search"><div class="fg-line"><input type="text" class="form-control" placeholder="Search People"></div></div><div class="listview"><a class="lv-item" href=""><div class="media"><div class="pull-left p-relative"><img class="lv-img-sm" src="wwwroot/img/profile-pics/2.jpg" alt=""> <i class="chat-status-busy"></i></div><div class="media-body"><div class="lv-title">Jonathan Morris</div><small class="lv-small">Available</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="wwwroot/img/profile-pics/1.jpg" alt=""></div><div class="media-body"><div class="lv-title">David Belle</div><small class="lv-small">Last seen 3 hours ago</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left p-relative"><img class="lv-img-sm" src="wwwroot/img/profile-pics/3.jpg" alt=""> <i class="chat-status-online"></i></div><div class="media-body"><div class="lv-title">Fredric Mitchell Jr.</div><small class="lv-small">Availble</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left p-relative"><img class="lv-img-sm" src="wwwroot/img/profile-pics/4.jpg" alt=""> <i class="chat-status-online"></i></div><div class="media-body"><div class="lv-title">Glenn Jecobs</div><small class="lv-small">Availble</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="wwwroot/img/profile-pics/5.jpg" alt=""></div><div class="media-body"><div class="lv-title">Bill Phillips</div><small class="lv-small">Last seen 3 days ago</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="wwwroot/img/profile-pics/6.jpg" alt=""></div><div class="media-body"><div class="lv-title">Wendy Mitchell</div><small class="lv-small">Last seen 2 minutes ago</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left p-relative"><img class="lv-img-sm" src="wwwroot/img/profile-pics/7.jpg" alt=""> <i class="chat-status-busy"></i></div><div class="media-body"><div class="lv-title">Teena Bell Ann</div><small class="lv-small">Busy</small></div></div></a></div>'),a.put("wwwroot/app/template/footer.html",'Copyright &copy; 2015 OnePiece<ul class="f-menu"><li><a href="" data-ui-sref="pages.wall" data-ng-click="onepiecectrl.sidebarStat($event)">Home</a></li><li><a href="" data-ui-sref="pages.league" data-ng-click="onepiecectrl.sidebarStat($event)">Leagues</a></li><li><a href="" data-ui-sref="pages.team" data-ng-click="onepiecectrl.sidebarStat($event)">Teams</a></li><li><a href="" data-ui-sref="pages.player" data-ng-click="onepiecectrl.sidebarStat($event)">Players</a></li></ul>'),a.put("wwwroot/app/template/header.html",'<ul class="header-inner"><li class="logo" data-ng-class="{ \'open\': onepiecectrl.sidebarToggle.left === true }" data-ui-sref-active="active"><a data-ui-sref="pages.wall({filter:\'\',slug:\'\'})"><div class="logo-button"></div></a></li><li class="menu hidden-xs p-l-15 p-r-15" data-target="mainmenu" data-toggle-sidebar data-model-left="onepiecectrl.sidebarToggle.left"><a href=""><i class="zmdi zmdi-menu f-25"></i></a></li><li class="menu hidden-xs" data-ui-sref-active="active"><a data-ui-sref="pages.wall({filter:\'image\',slug:\'\'})" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-image-o"></i> <span class="hidden-xs p-l-5">Image</span></a></li><li class="menu hidden-xs" data-ui-sref-active="active"><a data-ui-sref="pages.wall({filter:\'gif\',slug:\'\'})" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-collection-image-o"></i> <span class="hidden-xs p-l-5">Gif</span></a></li><li class="menu hidden-xs" data-ui-sref-active="active"><a data-ui-sref="pages.wall({filter:\'video\',slug:\'\'})" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-tv-play"></i> <span class="hidden-xs p-l-5">Video</span></a></li><li class="menu pull-right-start"></li><li class="menu"><a href="" data-ng-click="hctrl.openSearch();"><i class="zmdi zmdi-search f-25"></i></a></li><li class="menu" data-ng-if="!onepiecectrl.authentication.isAuth"><a href="" data-ng-click="hctrl.showLoginForm();"><i class="zmdi zmdi-lock-outline f-22"></i></a></li><li class="menu hidden-sm hidden-md hidden-lg" data-ng-if="onepiecectrl.authentication.isAuth"><a href="" data-ng-click="hctrl.showPostingForm();"><i class="zmdi zmdi-plus f-22"></i></a></li><li class="menu hidden-sm hidden-md hidden-lg"><a href="" data-target="mainmenu" data-toggle-sidebar data-model-left="onepiecectrl.sidebarToggle.left"><i class="zmdi zmdi-menu f-22"></i></a></li><li class="menu m-r-5"></li><!--<li class="pull-right">\r\n        <ul class="top-menu">\r\n\r\n            <!--<li id="toggle-width">\r\n                <div class="toggle-switch">\r\n                    <input id="tw-switch" type="checkbox" hidden="hidden" data-change-layout="onepiecectrl.layoutType">\r\n                    <label for="tw-switch" class="ts-helper"></label>\r\n                </div>\r\n            </li>--><!--<li id="top-search">\r\n                <a class="tm-search" href="" data-ng-click="hctrl.openSearch();"></a>\r\n            </li>--><!--<li class="dropdown" dropdown>\r\n                <a dropdown-toggle class="tm-message" href=""><i class="tmn-counts">6</i></a>\r\n                <div class="dropdown-menu dropdown-menu-lg stop-propagate pull-right">\r\n                    <div class="listview">\r\n                        <div class="lv-header">\r\n                            Messages\r\n                        </div>\r\n                        <div class="lv-body">\r\n                            <a class="lv-item" ng-href="" ng-repeat="w in hctrl.messageResult.list">\r\n                                <div class="media">\r\n                                    <div class="pull-left">\r\n                                        <img class="lv-img-sm" ng-src="wwwroot/img/profile-pics/{{ w.img }}" alt="">\r\n                                    </div>\r\n                                    <div class="media-body">\r\n                                        <div class="lv-title">{{ w.user }}</div>\r\n                                        <small class="lv-small">{{ w.text }}</small>\r\n                                    </div>\r\n                                </div>\r\n                            </a>\r\n                        </div>\r\n                        \r\n                        <div class="clearfix"></div>\r\n                        \r\n                        <a class="lv-footer" href="">View All</a>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <li class="dropdown" dropdown>\r\n                <a dropdown-toggle class="tm-notification" href=""><i class="tmn-counts">9</i></a>\r\n                <div class="dropdown-menu dropdown-menu-lg stop-propagate pull-right">\r\n                    <div class="listview" id="notifications">\r\n                        <div class="lv-header">\r\n                            Notification\r\n\r\n                            <ul class="actions">\r\n                                <li>\r\n                                    <a href="" data-ng-click="hctrl.clearNotification($event)">\r\n                                        <i class="zmdi zmdi-check-all"></i>\r\n                                    </a>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                        <div class="lv-body">\r\n                            <a class="lv-item" ng-href="" ng-repeat="w in hctrl.messageResult.list">\r\n                                <div class="media">\r\n                                    <div class="pull-left">\r\n                                        <img class="lv-img-sm" ng-src="wwwroot/img/profile-pics/{{ w.img }}" alt="">\r\n                                    </div>\r\n                                    <div class="media-body">\r\n                                        <div class="lv-title">{{ w.user }}</div>\r\n                                        <small class="lv-small">{{ w.text }}</small>\r\n                                    </div>\r\n                                </div>\r\n                            </a>\r\n                        </div>\r\n                        \r\n                        <div class="clearfix"></div>\r\n\r\n                        <a class="lv-footer" href="">View Previous</a>\r\n                    </div>\r\n\r\n                </div>\r\n            </li>\r\n            <li class="dropdown hidden-xs" dropdown>\r\n                <a dropdown-toggle class="tm-task" href=""><i class="tmn-counts">2</i></a>\r\n                <div class="dropdown-menu pull-right dropdown-menu-lg">\r\n                    <div class="listview">\r\n                        <div class="lv-header">\r\n                            Tasks\r\n                        </div>\r\n                        <div class="lv-body">\r\n                            <div class="lv-item">\r\n                                <div class="lv-title m-b-5">HTML5 Validation Report</div>\r\n\r\n                                <div class="progress">\r\n                                    <div class="progress-bar" role="progressbar" aria-valuenow="95" aria-valuemin="0" aria-valuemax="100" style="width: 95%">\r\n                                        <span class="sr-only">95% Complete (success)</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="lv-item">\r\n                                <div class="lv-title m-b-5">Google Chrome Extension</div>\r\n\r\n                                <div class="progress">\r\n                                    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%">\r\n                                        <span class="sr-only">80% Complete (success)</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="lv-item">\r\n                                <div class="lv-title m-b-5">Social Intranet Projects</div>\r\n\r\n                                <div class="progress">\r\n                                    <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%">\r\n                                        <span class="sr-only">20% Complete</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="lv-item">\r\n                                <div class="lv-title m-b-5">Bootstrap Admin Template</div>\r\n\r\n                                <div class="progress">\r\n                                    <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">\r\n                                        <span class="sr-only">60% Complete (warning)</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="lv-item">\r\n                                <div class="lv-title m-b-5">Youtube Client App</div>\r\n\r\n                                <div class="progress">\r\n                                    <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%">\r\n                                        <span class="sr-only">80% Complete (danger)</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div> \r\n                        </div>\r\n                        \r\n                        <div class="clearfix"></div>\r\n\r\n                        <a class="lv-footer" href="">View All</a>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n        </li>\r\n        </ul>--></ul><ul class="sub-header-inner hidden-sm hidden-md hidden-lg"><li class="menu" data-ui-sref-active="active"><a data-ui-sref="pages.wall({filter:\'image\',slug:\'\'})" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-image-o"></i> <span class="p-l-5">Image</span></a></li><li class="menu" data-ui-sref-active="active"><a data-ui-sref="pages.wall({filter:\'gif\',slug:\'\'})" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-collection-image-o"></i> <span class="p-l-5">Gif</span></a></li><li class="menu" data-ui-sref-active="active"><a data-ui-sref="pages.wall({filter:\'video\',slug:\'\'})" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-tv-play"></i> <span class="p-l-5">Video</span></a></li></ul><!-- Top Search Content --><div id="top-search-wrap"><input type="text" enter-key="hctrl.search()" data-ng-model="hctrl.searchText"> <i id="top-search-close" data-ng-click="hctrl.closeSearch()">&times;</i></div><script type="text/ng-template" id="loginForm"><!-- Login -->\r\n    <div data-ng-controller="loginCtrl as lctrl">\r\n        <form name="LoginForm" class="lc-block lc-form" id="l-login" data-ng-class="{ \'toggled\': loginTab }" data-ng-if="loginTab">\r\n            <div class="input-group m-b-20">\r\n                <span class="input-group-addon"><i class="zmdi zmdi-account"></i></span>\r\n                <div class="fg-line">\r\n                    <input type="text" name="userNameLogin" class="form-control" placeholder="Username" data-ng-model="loginForm.userName" enter-key="loginForm.submit(LoginForm)" validator="required,username" valid-method="watch" message-id="userNameLoginMessage">\r\n                    <span id="userNameLoginMessage"></span>\r\n                </div>\r\n            </div>\r\n            <div class="input-group m-b-20">\r\n                <span class="input-group-addon"><i class="zmdi zmdi-male"></i></span>\r\n                <div class="fg-line">\r\n                    <input type="password" name="passwordLogin" class="form-control" placeholder="Password" data-ng-model="loginForm.password" enter-key="loginForm.submit(LoginForm)" validator="required" valid-method="watch" message-id="passwordLoginMessage">\r\n                    <span id="passwordLoginMessage"></span>\r\n                </div>\r\n            </div>\r\n            <div class="clearfix"></div>\r\n            <div class="checkbox">\r\n                <label>\r\n                    <input type="checkbox" value="" data-ng-model="loginForm.useRefreshTokens">\r\n                    <i class="input-helper"></i>\r\n                    Keep me signed in\r\n                </label>\r\n            </div>\r\n            <a href="" class="btn btn-login btn-success btn-float" data-ng-click="loginForm.submit(LoginForm)"><i class="zmdi zmdi-arrow-forward"></i></a>\r\n            <a href="" class="btn btn-facebook-login btn-primary btn-float" data-ng-click="authExternalProvider(\'Facebook\')"><i class="zmdi zmdi-facebook"></i></a>\r\n            <a href="" class="btn btn-google-login btn-danger btn-float" data-ng-click="authExternalProvider(\'Google\')"><i class="zmdi zmdi-google"></i></a>\r\n            <ul class="login-navigation">\r\n                <li data-block="#l-register" class="bgm-red" data-ng-click="gotoTab(\'register\')">Register</li>\r\n                <li data-block="#l-forget-password" class="bgm-orange" data-ng-click="gotoTab(\'forgot\')">Forgot Password?</li>\r\n            </ul>\r\n        </form>\r\n        <!-- Register -->\r\n        <form name="RegisterForm" class="lc-block lc-form" id="l-register" data-ng-class="{ \'toggled\': registerTab }" data-ng-if="registerTab">\r\n            <div class="input-group m-b-20">\r\n                <span class="input-group-addon"><i class="zmdi zmdi-account"></i></span>\r\n                <div class="fg-line">\r\n                    <input type="text" name="userNameRegister" class="form-control" placeholder="Username" data-ng-model="registerForm.userName" enter-key="registerForm.submit(RegisterForm)" validator="required,username" valid-method="watch" message-id="userNameRegisterMessage">\r\n                    <span id="userNameRegisterMessage"></span>\r\n                </div>\r\n            </div>\r\n            <div class="input-group m-b-20">\r\n                <span class="input-group-addon"><i class="zmdi zmdi-email"></i></span>\r\n                <div class="fg-line">\r\n                    <input type="text" name="emailRegister" class="form-control" placeholder="Email Address" data-ng-model="registerForm.email" enter-key="registerForm.submit(RegisterForm)" validator="required,email" valid-method="watch" message-id="emailRegisterMessage">\r\n                    <span id="emailRegisterMessage"></span>\r\n                </div>\r\n            </div>\r\n            <div class="input-group m-b-20">\r\n                <span class="input-group-addon"><i class="zmdi zmdi-male"></i></span>\r\n                <div class="fg-line">\r\n                    <input type="password" name="passwordRegister" class="form-control" placeholder="Password" data-ng-model="registerForm.password" enter-key="registerForm.submit(RegisterForm)" validator="required,minlength=6" valid-method="watch" message-id="passwordRegisterMessage">\r\n                    <span id="passwordRegisterMessage"></span>\r\n                </div>\r\n            </div>\r\n            <div class="clearfix"></div>\r\n            <div class="checkbox">\r\n                <label>\r\n                    <input type="checkbox" value="">\r\n                    <i class="input-helper"></i>\r\n                    Accept the license agreement\r\n                </label>\r\n            </div>\r\n            <a href="" class="btn btn-login btn-danger btn-float" data-ng-click="registerForm.submit(RegisterForm)"><i class="zmdi zmdi-arrow-forward"></i></a>\r\n            <ul class="login-navigation">\r\n                <li data-block="#l-login" class="bgm-green" data-ng-click="gotoTab(\'login\')">Login</li>\r\n                <li data-block="#l-forget-password" class="bgm-orange" data-ng-click="gotoTab(\'forgot\')">Forgot Password?</li>\r\n            </ul>\r\n        </form>\r\n        <!-- Forgot Password -->\r\n        <form name="ForgotForm" class="lc-block lc-form" id="l-forget-password" data-ng-class="{ \'toggled\': forgotTab }" data-ng-if="forgotTab">\r\n            <p class="text-left">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla eu risus. Curabitur commodo lorem fringilla enim feugiat commodo sed ac lacus.</p>\r\n            <div class="input-group m-b-20">\r\n                <span class="input-group-addon"><i class="zmdi zmdi-email"></i></span>\r\n                <div class="fg-line">\r\n                    <input type="text" name="emailForgot" class="form-control" placeholder="Email Address" data-ng-model="forgotForm.email" enter-key="forgotForm.submit(ForgotForm)" validator="required,email" valid-method="watch" message-id="emailForgotMessage">\r\n                    <span id="emailForgotMessage"></span>\r\n                </div>\r\n            </div>\r\n            <a href="" class="btn btn-login btn-warning btn-float"><i class="zmdi zmdi-arrow-forward"></i></a>\r\n            <ul class="login-navigation">\r\n                <li data-block="#l-login" class="bgm-green" data-ng-click="gotoTab(\'login\')">Login</li>\r\n                <li data-block="#l-register" class="bgm-red" data-ng-click="gotoTab(\'register\')">Register</li>\r\n            </ul>\r\n        </form>\r\n        <!-- Older IE warning message -->\r\n        <!--[if lt IE 9]>\r\n            <div class="ie-warning">\r\n                <h1 class="c-white">Warning!!</h1>\r\n                <p>You are using an outdated version of Internet Explorer, please upgrade <br/>to any of the following web browsers to access this website.</p>\r\n                <div class="iew-container">\r\n                    <ul class="iew-download">\r\n                        <li>\r\n                            <a href="http://www.google.com/chrome/">\r\n                                <img src="img/browsers/chrome.png" alt="">\r\n                                <div>Chrome</div>\r\n                            </a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="https://www.mozilla.org/en-US/firefox/new/">\r\n                                <img src="img/browsers/firefox.png" alt="">\r\n                                <div>Firefox</div>\r\n                            </a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="http://www.opera.com">\r\n                                <img src="img/browsers/opera.png" alt="">\r\n                                <div>Opera</div>\r\n                            </a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="https://www.apple.com/safari/">\r\n                                <img src="img/browsers/safari.png" alt="">\r\n                                <div>Safari</div>\r\n                            </a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie">\r\n                                <img src="img/browsers/ie.png" alt="">\r\n                                <div>IE (New)</div>\r\n                            </a>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <p>Sorry for the inconvenience!</p>\r\n            </div>\r\n        <![endif]-->\r\n    </div></script>'),a.put("wwwroot/app/template/management-header.html",'<ul class="header-inner"><li class="logo" data-ng-class="{ \'open\': onepiecectrl.sidebarToggle.left === true }" data-ui-sref-active="active"><a data-ui-sref="pages.wall({filter:\'\',slug:\'\'})"><div class="logo-button"></div></a></li><li class="menu hidden-xs p-l-15 p-r-15" data-target="mainmenu" data-toggle-sidebar data-model-left="onepiecectrl.sidebarToggle.left"><a href=""><i class="zmdi zmdi-menu f-25"></i></a></li><li class="menu hidden-sm hidden-md hidden-lg"><a href="" data-target="mainmenu" data-toggle-sidebar data-model-left="onepiecectrl.sidebarToggle.left"><i class="zmdi zmdi-menu f-22"></i></a></li><li class="menu m-r-5"></li></ul><ul class="sub-header-inner hidden-sm hidden-md hidden-lg"><li class="menu" data-ui-sref-active="active"><a data-ui-sref="pages.wall({filter:\'image\',slug:\'\'})" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-image-o"></i> <span class="p-l-5">Image</span></a></li><li class="menu" data-ui-sref-active="active"><a data-ui-sref="pages.wall({filter:\'gif\',slug:\'\'})" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-collection-image-o"></i> <span class="p-l-5">Gif</span></a></li><li class="menu" data-ui-sref-active="active"><a data-ui-sref="pages.wall({filter:\'video\',slug:\'\'})" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-tv-play"></i> <span class="p-l-5">Video</span></a></li></ul><!-- Top Search Content --><div id="top-search-wrap"><input type="text" enter-key="hctrl.search()" data-ng-model="hctrl.searchText"> <i id="top-search-close" data-ng-click="hctrl.closeSearch()">&times;</i></div><script type="text/ng-template" id="loginForm"><!-- Login -->\r\n    <div data-ng-controller="loginCtrl as lctrl">\r\n        <form name="LoginForm" class="lc-block lc-form" id="l-login" data-ng-class="{ \'toggled\': loginTab }" data-ng-if="loginTab">\r\n            <div class="input-group m-b-20">\r\n                <span class="input-group-addon"><i class="zmdi zmdi-account"></i></span>\r\n                <div class="fg-line">\r\n                    <input type="text" name="userNameLogin" class="form-control" placeholder="Username" data-ng-model="loginForm.userName" enter-key="loginForm.submit(LoginForm)" validator="required,username" valid-method="watch" message-id="userNameLoginMessage">\r\n                    <span id="userNameLoginMessage"></span>\r\n                </div>\r\n            </div>\r\n            <div class="input-group m-b-20">\r\n                <span class="input-group-addon"><i class="zmdi zmdi-male"></i></span>\r\n                <div class="fg-line">\r\n                    <input type="password" name="passwordLogin" class="form-control" placeholder="Password" data-ng-model="loginForm.password" enter-key="loginForm.submit(LoginForm)" validator="required" valid-method="watch" message-id="passwordLoginMessage">\r\n                    <span id="passwordLoginMessage"></span>\r\n                </div>\r\n            </div>\r\n            <div class="clearfix"></div>\r\n            <div class="checkbox">\r\n                <label>\r\n                    <input type="checkbox" value="" data-ng-model="loginForm.useRefreshTokens">\r\n                    <i class="input-helper"></i>\r\n                    Keep me signed in\r\n                </label>\r\n            </div>\r\n            <a href="" class="btn btn-login btn-success btn-float" data-ng-click="loginForm.submit(LoginForm)"><i class="zmdi zmdi-arrow-forward"></i></a>\r\n            <a href="" class="btn btn-facebook-login btn-primary btn-float" data-ng-click="authExternalProvider(\'Facebook\')"><i class="zmdi zmdi-facebook"></i></a>\r\n            <a href="" class="btn btn-google-login btn-danger btn-float" data-ng-click="authExternalProvider(\'Google\')"><i class="zmdi zmdi-google"></i></a>\r\n            <ul class="login-navigation">\r\n                <li data-block="#l-register" class="bgm-red" data-ng-click="gotoTab(\'register\')">Register</li>\r\n                <li data-block="#l-forget-password" class="bgm-orange" data-ng-click="gotoTab(\'forgot\')">Forgot Password?</li>\r\n            </ul>\r\n        </form>\r\n        <!-- Register -->\r\n        <form name="RegisterForm" class="lc-block lc-form" id="l-register" data-ng-class="{ \'toggled\': registerTab }" data-ng-if="registerTab">\r\n            <div class="input-group m-b-20">\r\n                <span class="input-group-addon"><i class="zmdi zmdi-account"></i></span>\r\n                <div class="fg-line">\r\n                    <input type="text" name="userNameRegister" class="form-control" placeholder="Username" data-ng-model="registerForm.userName" enter-key="registerForm.submit(RegisterForm)" validator="required,username" valid-method="watch" message-id="userNameRegisterMessage">\r\n                    <span id="userNameRegisterMessage"></span>\r\n                </div>\r\n            </div>\r\n            <div class="input-group m-b-20">\r\n                <span class="input-group-addon"><i class="zmdi zmdi-email"></i></span>\r\n                <div class="fg-line">\r\n                    <input type="text" name="emailRegister" class="form-control" placeholder="Email Address" data-ng-model="registerForm.email" enter-key="registerForm.submit(RegisterForm)" validator="required,email" valid-method="watch" message-id="emailRegisterMessage">\r\n                    <span id="emailRegisterMessage"></span>\r\n                </div>\r\n            </div>\r\n            <div class="input-group m-b-20">\r\n                <span class="input-group-addon"><i class="zmdi zmdi-male"></i></span>\r\n                <div class="fg-line">\r\n                    <input type="password" name="passwordRegister" class="form-control" placeholder="Password" data-ng-model="registerForm.password" enter-key="registerForm.submit(RegisterForm)" validator="required,minlength=6" valid-method="watch" message-id="passwordRegisterMessage">\r\n                    <span id="passwordRegisterMessage"></span>\r\n                </div>\r\n            </div>\r\n            <div class="clearfix"></div>\r\n            <div class="checkbox">\r\n                <label>\r\n                    <input type="checkbox" value="">\r\n                    <i class="input-helper"></i>\r\n                    Accept the license agreement\r\n                </label>\r\n            </div>\r\n            <a href="" class="btn btn-login btn-danger btn-float" data-ng-click="registerForm.submit(RegisterForm)"><i class="zmdi zmdi-arrow-forward"></i></a>\r\n            <ul class="login-navigation">\r\n                <li data-block="#l-login" class="bgm-green" data-ng-click="gotoTab(\'login\')">Login</li>\r\n                <li data-block="#l-forget-password" class="bgm-orange" data-ng-click="gotoTab(\'forgot\')">Forgot Password?</li>\r\n            </ul>\r\n        </form>\r\n        <!-- Forgot Password -->\r\n        <form name="ForgotForm" class="lc-block lc-form" id="l-forget-password" data-ng-class="{ \'toggled\': forgotTab }" data-ng-if="forgotTab">\r\n            <p class="text-left">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla eu risus. Curabitur commodo lorem fringilla enim feugiat commodo sed ac lacus.</p>\r\n            <div class="input-group m-b-20">\r\n                <span class="input-group-addon"><i class="zmdi zmdi-email"></i></span>\r\n                <div class="fg-line">\r\n                    <input type="text" name="emailForgot" class="form-control" placeholder="Email Address" data-ng-model="forgotForm.email" enter-key="forgotForm.submit(ForgotForm)" validator="required,email" valid-method="watch" message-id="emailForgotMessage">\r\n                    <span id="emailForgotMessage"></span>\r\n                </div>\r\n            </div>\r\n            <a href="" class="btn btn-login btn-warning btn-float"><i class="zmdi zmdi-arrow-forward"></i></a>\r\n            <ul class="login-navigation">\r\n                <li data-block="#l-login" class="bgm-green" data-ng-click="gotoTab(\'login\')">Login</li>\r\n                <li data-block="#l-register" class="bgm-red" data-ng-click="gotoTab(\'register\')">Register</li>\r\n            </ul>\r\n        </form>\r\n        <!-- Older IE warning message -->\r\n        <!--[if lt IE 9]>\r\n            <div class="ie-warning">\r\n                <h1 class="c-white">Warning!!</h1>\r\n                <p>You are using an outdated version of Internet Explorer, please upgrade <br/>to any of the following web browsers to access this website.</p>\r\n                <div class="iew-container">\r\n                    <ul class="iew-download">\r\n                        <li>\r\n                            <a href="http://www.google.com/chrome/">\r\n                                <img src="img/browsers/chrome.png" alt="">\r\n                                <div>Chrome</div>\r\n                            </a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="https://www.mozilla.org/en-US/firefox/new/">\r\n                                <img src="img/browsers/firefox.png" alt="">\r\n                                <div>Firefox</div>\r\n                            </a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="http://www.opera.com">\r\n                                <img src="img/browsers/opera.png" alt="">\r\n                                <div>Opera</div>\r\n                            </a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="https://www.apple.com/safari/">\r\n                                <img src="img/browsers/safari.png" alt="">\r\n                                <div>Safari</div>\r\n                            </a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie">\r\n                                <img src="img/browsers/ie.png" alt="">\r\n                                <div>IE (New)</div>\r\n                            </a>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <p>Sorry for the inconvenience!</p>\r\n            </div>\r\n        <![endif]-->\r\n    </div></script>'),
a.put("wwwroot/app/template/management-sidebar.html",'<div class="sidebar-inner c-overflow"><div data-ng-if="onepiecectrl.authentication.isAuth" class="profile-menu"><a href="" toggle-submenu><div class="profile-pic"><img data-ng-src="{{onepiecectrl.authentication.userInfo.Avatar}}" alt=""></div><div class="profile-info">{{onepiecectrl.authentication.userInfo.DisplayName}} <i class="zmdi zmdi-caret-down"></i></div></a><ul class="main-menu"><li><a data-ui-sref="pages.profile.about({username: onepiecectrl.authentication.userName})" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-account"></i> View Profile</a></li><li><a href=""><i class="zmdi zmdi-input-antenna"></i> Privacy Settings</a></li><li><a href=""><i class="zmdi zmdi-settings"></i> Settings</a></li><li><a href="" data-ng-click="onepiecectrl.logOut()"><i class="zmdi zmdi-time-restore"></i> Logout</a></li></ul></div><ul class="main-menu"><li data-ui-sref-active="active"><a data-ui-sref="pages.wall" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-home"></i> Dash Board</a></li><li data-ui-sref-active="active"><a data-ui-sref="pages.league" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-globe-alt"></i> Leagues</a></li><li data-ui-sref-active="active"><a data-ui-sref="pages.team" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-flag"></i> Teams</a></li><li data-ui-sref-active="active"><a data-ui-sref="pages.player" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-run"></i> Players</a></li><li data-ui-sref-active="active"><a data-ui-sref="management.dashboard" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-puzzle-piece"></i> Management</a></li></ul></div>'),a.put("wwwroot/app/template/profile-menu.html",'<li class="btn-wave" data-ui-sref-active="active"><a data-ui-sref="pages.profile.about">Thông tin</a></li><li class="btn-wave" data-ui-sref-active="active"><a data-ui-sref="pages.profile.connections">Bạn bè</a></li><li class="btn-wave" data-ui-sref-active="active"><a data-ui-sref="pages.profile.photos">Hình ảnh</a></li><li class="btn-wave" data-ui-sref-active="active"><a data-ui-sref="pages.profile.posts">Bài đăng</a></li>'),a.put("wwwroot/app/template/sidebar-left.html",'<div class="sidebar-inner c-overflow"><div data-ng-if="onepiecectrl.authentication.isAuth" class="profile-menu"><a href="" toggle-submenu><div class="profile-pic"><img data-ng-src="{{onepiecectrl.authentication.userInfo.Avatar}}" alt=""></div><div class="profile-info">{{onepiecectrl.authentication.userInfo.DisplayName}} <i class="zmdi zmdi-caret-down"></i></div></a><ul class="main-menu"><li><a data-ui-sref="pages.profile.about({username: onepiecectrl.authentication.userName})" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-account"></i> View Profile</a></li><li><a href=""><i class="zmdi zmdi-input-antenna"></i> Privacy Settings</a></li><li><a href=""><i class="zmdi zmdi-settings"></i> Settings</a></li><li><a href="" data-ng-click="onepiecectrl.logOut()"><i class="zmdi zmdi-time-restore"></i> Logout</a></li></ul></div><ul class="main-menu"><li data-ui-sref-active="active"><a data-ui-sref="pages.wall" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-home"></i> Home</a></li><li data-ui-sref-active="active"><a data-ui-sref="pages.league" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-globe-alt"></i> Leagues</a></li><li data-ui-sref-active="active"><a data-ui-sref="pages.team" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-flag"></i> Teams</a></li><li data-ui-sref-active="active"><a data-ui-sref="pages.player" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-run"></i> Players</a></li><li data-ng-if="onepiecectrl.authentication.isAdmin" data-ui-sref-active="active"><a data-ui-sref="management.posts" data-ng-click="onepiecectrl.sidebarStat($event)"><i class="zmdi zmdi-puzzle-piece"></i> Management</a></li></ul></div>'),a.put("wwwroot/app/template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()"><ol class="carousel-indicators" ng-show="slides.length > 1"><li ng-repeat="slide in slides | orderBy:\'index\' track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li></ol><div class="carousel-inner" ng-transclude></div><a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="zmdi zmdi-chevron-left"></span></a> <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="zmdi zmdi-chevron-right"></span></a></div>'),a.put("wwwroot/app/template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}" class="dp-table dpt-day"><thead><tr class="tr-dpnav"><th><button type="button" class="pull-left btn-dp" ng-click="move(-1)" tabindex="-1"><i class="zmdi zmdi-long-arrow-left"></i></button></th><th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" class="w-100 btn-dp"><div class="dp-title">{{title}}</div></button></th><th><button type="button" class="pull-right btn-dp" ng-click="move(1)" tabindex="-1"><i class="zmdi zmdi-long-arrow-right"></i></button></th></tr><tr class="tr-dpday"><th ng-if="showWeeks" class="text-center"></th><th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th></tr></thead><tbody><tr ng-repeat="row in rows track by $index"><td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td><td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass"><button type="button" class="w-100 btn-dp btn-dpday btn-dpbody" ng-class="{\'dp-today\': dt.current, \'dp-selected\': dt.selected, \'dp-active\': isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'dp-day-muted\': dt.secondary, \'dp-day-today\': dt.current}">{{::dt.label}}</span></button></td></tr></tbody></table>'),a.put("wwwroot/app/template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}" class="dp-table"><thead><tr class="tr-dpnav"><th><button type="button" class="pull-left btn-dp" ng-click="move(-1)" tabindex="-1"><i class="zmdi zmdi-long-arrow-left"></i></button></th><th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" class="w-100 btn-dp"><div class="dp-title">{{title}}</div></button></th><th><button type="button" class="pull-right btn-dp" ng-click="move(1)" tabindex="-1"><i class="zmdi zmdi-long-arrow-right"></i></button></th></tr></thead><tbody><tr ng-repeat="row in rows track by $index"><td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass"><button type="button" class="w-100 btn-dp btn-dpbody" ng-class="{\'dp-selected\': dt.selected, \'dp-active\': isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'dp-day-today\': dt.current}">{{::dt.label}}</span></button></td></tr></tbody></table>'),a.put("wwwroot/app/template/datepicker/popup.html",'<ul class="dropdown-menu" ng-keydown="keydown($event)"><li ng-transclude></li><li ng-if="showButtonBar" class="dp-actions clearfix"><button type="button" class="btn btn-link" ng-click="select(\'today\')">{{ getText(\'current\') }}</button> <button type="button" class="btn btn-link" ng-click="close()">{{ getText(\'close\') }}</button></li></ul>'),a.put("wwwroot/app/template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}" class="dp-table"><thead><tr class="tr-dpnav"><th><button type="button" class="pull-left btn-dp" ng-click="move(-1)" tabindex="-1"><i class="zmdi zmdi-long-arrow-left"></i></button></th><th colspan="3"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="w-100 btn-dp" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><div class="dp-title">{{title}}</div></button></th><th><button type="button" class="pull-right btn-dp" ng-click="move(1)" tabindex="-1"><i class="zmdi zmdi-long-arrow-right"></i></button></th></tr></thead><tbody><tr ng-repeat="row in rows track by $index"><td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}"><button type="button" class="w-100 btn-dp btn-dpbody" ng-class="{\'dp-selected\': dt.selected, \'dp-active\': isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'dp-day-today\': dt.current}">{{::dt.label}}</span></button></td></tr></tbody></table>'),a.put("wwwroot/app/template/pagination/pager.html",'<ul class="pager"><li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1, $event)">Previous</a></li><li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1, $event)">Next</a></li></ul>'),a.put("wwwroot/app/template/pagination/pagination.html",'<ul class="pagination"><li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1, $event)"><i class="zmdi zmdi-more-horiz"><i></i></i></a></li><li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1, $event)"><i class="zmdi zmdi-chevron-left"></i></a></li><li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li><li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1, $event)"><i class="zmdi zmdi-chevron-right"></i></a></li><li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages, $event)"><i class="zmdi zmdi-more-horiz"><i></i></i></a></li></ul>'),a.put("wwwroot/app/template/tabs/tabset.html",'<div class="clearfix"><ul class="tab-nav" ng-class="{\'tn-vertical\': vertical, \'tn-justified\': justified, \'tab-nav-right\': right}" ng-transclude></ul><div class="tab-content"><div class="tab-pane" ng-repeat="tab in tabs" ng-class="{active: tab.active}" tab-content-transclude="tab"></div></div></div>')}]);